
<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">


<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset='utf-8'>

<meta name='viewport' content='width=device-width, initial-scale=1'>

<meta name='description' content="用户名root vnc登陆，密码是_1的那个 创建git_1用户，用于git 用户：git_1 密码：6.29-gitone 到这一步了：[git_1@VM-12-5-centos ~]$ git init &ndash;bare hugo.git Initialized empty Git repository in /home/git_1/hugo.git/ [git_1@VM-12-5-centos ~]$ 基础操作 切换到rooot用户 su - root 输入腾讯云的密码（root账号的密码_1的） Nginx详解（一文带你搞懂Nginx）-CSDN博客 全面解析｜搞懂Nginx这一篇就够了-阿里云开发者社区 (aliyun.com) Nginx快速入门-KuangStudy-文章 Nginx | 程序开发与运维 (stonecoding.net) 加权重 架构上解决不了的问题，没有是加一层是解决不了的问题。JDBC也是如此 nginx 高性能：响应更快和并发更高。占用内存少、并发能力强。 反向代理： 1正向代理： 代理客户端的，本机上装的。 例如： VPN、访问不了外网的，为什么用了vpn就能用了，代理服务器帮助请求外部资源。 请求内地-香港-美国-返回-香港-美国 客户端的 服务端的 反向代理： 代理服务器端的， 无感知去浏览一个服务器资源的，让服务器更好部署上线 访问百度、背后不止一个服务器的，请求就是一个IP或者网址. 因为服务端有一个代理服务器。 2负载均衡： 64G、32G、16G服务器； 权重、轮询和加权轮询。 请求就是依次轮询； 加权轮询就是加了权重的轮询，很小内存的服务器也能正常上线。 IPhash: Session保存在tomcat中，每个服务器中都有一个tomcat，而每个tomcat中的session不共享的。 n个服务器n个tomcat 一、加redis解决 建议用redis做session共享。 二、negix默认算法 negix的默认算法： 小明的请求固定的IP固定永远请求到固定的服务器上。 session就不会丢失,但是该服务器挂了session就挂了。性能不是很好。 所以不推荐用negix 3动静分离 例如：bootstrap的jquery的js 静态资源每次从jar包中加载很麻烦； nginx能做到静态资源的存储，提示访问速度。 Nginx安装 windows解压安装即可。">



<title></title>


<link rel='canonical' href='http://localhost:1313/post/%E8%85%BE%E8%AE%AF%E4%BA%91%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/'>


                                                          
<link rel="stylesheet" href="/scss/partials/navbar.scss">


<link rel="stylesheet" href="/scss/style.min.181973835010c8e02b5f9ae8cec748ae5985d79b2a50e665db98c46e31e96775.css"><meta property='og:title' content="">
<meta property='og:description' content="用户名root vnc登陆，密码是_1的那个 创建git_1用户，用于git 用户：git_1 密码：6.29-gitone 到这一步了：[git_1@VM-12-5-centos ~]$ git init &ndash;bare hugo.git Initialized empty Git repository in /home/git_1/hugo.git/ [git_1@VM-12-5-centos ~]$ 基础操作 切换到rooot用户 su - root 输入腾讯云的密码（root账号的密码_1的） Nginx详解（一文带你搞懂Nginx）-CSDN博客 全面解析｜搞懂Nginx这一篇就够了-阿里云开发者社区 (aliyun.com) Nginx快速入门-KuangStudy-文章 Nginx | 程序开发与运维 (stonecoding.net) 加权重 架构上解决不了的问题，没有是加一层是解决不了的问题。JDBC也是如此 nginx 高性能：响应更快和并发更高。占用内存少、并发能力强。 反向代理： 1正向代理： 代理客户端的，本机上装的。 例如： VPN、访问不了外网的，为什么用了vpn就能用了，代理服务器帮助请求外部资源。 请求内地-香港-美国-返回-香港-美国 客户端的 服务端的 反向代理： 代理服务器端的， 无感知去浏览一个服务器资源的，让服务器更好部署上线 访问百度、背后不止一个服务器的，请求就是一个IP或者网址. 因为服务端有一个代理服务器。 2负载均衡： 64G、32G、16G服务器； 权重、轮询和加权轮询。 请求就是依次轮询； 加权轮询就是加了权重的轮询，很小内存的服务器也能正常上线。 IPhash: Session保存在tomcat中，每个服务器中都有一个tomcat，而每个tomcat中的session不共享的。 n个服务器n个tomcat 一、加redis解决 建议用redis做session共享。 二、negix默认算法 negix的默认算法： 小明的请求固定的IP固定永远请求到固定的服务器上。 session就不会丢失,但是该服务器挂了session就挂了。性能不是很好。 所以不推荐用negix 3动静分离 例如：bootstrap的jquery的js 静态资源每次从jar包中加载很麻烦； nginx能做到静态资源的存储，提示访问速度。 Nginx安装 windows解压安装即可。">
<meta property='og:url' content='http://localhost:1313/post/%E8%85%BE%E8%AE%AF%E4%BA%91%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/'>
<meta property='og:site_name' content='PoolBee的博客'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' />
<meta name="twitter:site" content="@PoolBee">
    <meta name="twitter:creator" content="@PoolBee"><meta name="twitter:title" content="">
<meta name="twitter:description" content="用户名root vnc登陆，密码是_1的那个 创建git_1用户，用于git 用户：git_1 密码：6.29-gitone 到这一步了：[git_1@VM-12-5-centos ~]$ git init &ndash;bare hugo.git Initialized empty Git repository in /home/git_1/hugo.git/ [git_1@VM-12-5-centos ~]$ 基础操作 切换到rooot用户 su - root 输入腾讯云的密码（root账号的密码_1的） Nginx详解（一文带你搞懂Nginx）-CSDN博客 全面解析｜搞懂Nginx这一篇就够了-阿里云开发者社区 (aliyun.com) Nginx快速入门-KuangStudy-文章 Nginx | 程序开发与运维 (stonecoding.net) 加权重 架构上解决不了的问题，没有是加一层是解决不了的问题。JDBC也是如此 nginx 高性能：响应更快和并发更高。占用内存少、并发能力强。 反向代理： 1正向代理： 代理客户端的，本机上装的。 例如： VPN、访问不了外网的，为什么用了vpn就能用了，代理服务器帮助请求外部资源。 请求内地-香港-美国-返回-香港-美国 客户端的 服务端的 反向代理： 代理服务器端的， 无感知去浏览一个服务器资源的，让服务器更好部署上线 访问百度、背后不止一个服务器的，请求就是一个IP或者网址. 因为服务端有一个代理服务器。 2负载均衡： 64G、32G、16G服务器； 权重、轮询和加权轮询。 请求就是依次轮询； 加权轮询就是加了权重的轮询，很小内存的服务器也能正常上线。 IPhash: Session保存在tomcat中，每个服务器中都有一个tomcat，而每个tomcat中的session不共享的。 n个服务器n个tomcat 一、加redis解决 建议用redis做session共享。 二、negix默认算法 negix的默认算法： 小明的请求固定的IP固定永远请求到固定的服务器上。 session就不会丢失,但是该服务器挂了session就挂了。性能不是很好。 所以不推荐用negix 3动静分离 例如：bootstrap的jquery的js 静态资源每次从jar包中加载很麻烦； nginx能做到静态资源的存储，提示访问速度。 Nginx安装 windows解压安装即可。">
  




    
</head>

<body class="
    article-page
    ">
    
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;
        

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
            
        } else {
            document.documentElement.dataset.scheme = 'light';
            
        }
    })();
</script>


    <nav id="navbar" class="navbar--fixed-top">
    <div class="container">
        <a href="/" class="navbar-brand">
            
        </a>
        <ul class="navbar-nav">
            
            <li class="nav-item"><a href="/" class="nav-link">Home</a></li>
            <li class="nav-item"><a href="/page/about/" class="nav-link" >关于我</a></li>
            <li class="nav-item"><a href="/page/daily_info/" class="nav-link" target="_blank">走走停停</a></li>
            <li class="nav-item"><a href="/page/blogroll/" class="nav-link" target="_blank">友链</a></li>
        </ul>
    </div>
</nav>

<script>
    let lastScrollY = window.scrollY;
    const navbar = document.getElementById('navbar');

    window.addEventListener('scroll', () => {
        if (window.scrollY > lastScrollY) {
            
            navbar.classList.add('navbar--hidden');
        } else {
            
            navbar.classList.remove('navbar--hidden');
        }
        lastScrollY = window.scrollY;
    });

    
    document.addEventListener('DOMContentLoaded', () => {
        const path = window.location.pathname;
        const navLinks = document.querySelectorAll('.nav-link');

        navLinks.forEach(link => {
            if (link.getAttribute('href') === path) {
                link.parentElement.classList.add('active'); 
            }
        });
    });
</script>

    

    <div class="container main-container flex on-phone--column extended">
        <aside class="sidebar left-sidebar sticky compact">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="切换菜单">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hud111a09d55ebb32217e16308c85c65c5_4420_300x0_resize_box_3.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">🌏</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">PoolBee的博客</a></h1>
            <h2 class="site-description">热爱生活，忠于记录</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://space.bilibili.com/28343232'
                        target="_blank"
                        title="Blibili"
                        rel="me"
                    >
                        
                        
                            <?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg class="icon" width="24px" height="24.00px" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M665.056 123.904a32 32 0 0 1 49.824 40.192l-36.8 45.632c114.48 4.32 166 19.904 198.784 66.512C908.032 320.528 912 363.6 912 539.168 912 861.952 891.152 880 512 880 136.64 880 112.448 862.32 112 548.768v-25.216c0.272-160.224 4.864-201.984 34.4-245.072 32.832-47.904 85.664-64.112 201.504-68.752l-36.8-45.632a32 32 0 1 1 49.808-40.192l68.064 84.4 23.2-0.256h4.368l2.224-0.016h6.976l2.496-0.016L506.992 208h52.832l37.104 0.352zM559.52 272h-91.104l-9.344 0.032h-6.464l-77.504 0.864c-113.52 2.784-156.8 13.888-175.92 41.76-18.784 27.424-22.928 67.008-23.168 209.872v29.568c0.32 163.072 6.368 202.768 34.928 227.488C243.12 809.424 304.064 816 512 816c207.936 0 268.88-6.56 301.056-34.416C842.464 756.128 848 714.784 848 539.184c0-156.736-3.824-198.176-23.472-226.112-19.28-27.408-62.928-37.952-179.248-40.24L559.52 272z m-20.656 324.208c15.312 27.168 27.456 37.504 34.88 37.76 4 0.144 10.096-4.064 16.688-12.88a91.904 91.904 0 0 0 10.08-17.312 24 24 0 0 1 44.384 18.24 132 132 0 0 1-16 27.776c-15.04 20.16-33.6 32.96-56.832 32.16-19.184-0.688-36.896-10.944-53.504-30.528l-0.896-1.088-0.112 0.144c-15.68 17.92-32.688 27.792-51.04 29.392l-3.264 0.192c-23.024 0.768-42.368-11.008-58.736-29.808a132.88 132.88 0 0 1-18.176-26.576 24 24 0 1 1 42.88-21.552 94.16 94.16 0 0 0 11.488 16.608c7.84 8.992 15.312 13.536 20.96 13.36 8.64-0.288 20.736-10.08 35.408-35.936a24 24 0 0 1 41.792 0.048z m31.072-173.408a36.112 36.112 0 0 1 42.72-23.088l140.288 34.64a29.472 29.472 0 0 1 20.592 38.8 36.8 36.8 0 0 1-43.36 22.992l-139.264-34.496a29.84 29.84 0 0 1-20.96-38.848z m-115.616-0.032a30.032 30.032 0 0 1-21.168 38.88L294.4 496.064a37.136 37.136 0 0 1-43.68-22.944 29.296 29.296 0 0 1 20.384-38.784l140.8-34.72a35.76 35.76 0 0 1 42.4 23.136z"  /></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='mailto:Cr8462643@163.com'
                        target="_blank"
                        title="Email"
                        rel="me"
                    >
                        
                        
                            <?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg class="icon" width="24px" height="24.00px" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M777.1136 164.8128H262.2976a151.1424 151.1424 0 0 0-150.9888 150.9376v393.5232A151.1424 151.1424 0 0 0 262.2976 860.16h514.816a151.1424 151.1424 0 0 0 150.9888-150.9888V315.7504a150.3232 150.3232 0 0 0-150.9888-150.9376zM262.2976 224.1536h514.816a90.0096 90.0096 0 0 1 77.4144 43.8784l-296.96 241.3056a60.2624 60.2624 0 0 1-76.1344 0l-296.96-241.3056a92.8768 92.8768 0 0 1 77.824-43.8784z m514.816 576.768H262.2976a90.5728 90.5728 0 0 1-90.3168-90.3168V337.92l272.2304 220.6208a122.2144 122.2144 0 0 0 76.1344 27.0848 119.6032 119.6032 0 0 0 76.1344-27.0848L868.7104 337.92v372.8896a92.5696 92.5696 0 0 1-91.5968 90.112z" /></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://github.com/PoolBee/PoolBee.github.io'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1721529668393" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5378" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24"><path fill="currentColor" d="M822.514 74.129c10.466 0.815 19.898 5.47 26.913 13.047 9.015 9.737 12.574 21.584 13.722 36.348l0.088 1.208 0.096 1.514 0.055 1.015 0.049 1.02 0.021 0.512 0.054 1.547 0.027 1.04 0.028 1.577 0.01 1.063 0.003 1.073-0.009 1.63-0.015 1.102-0.022 1.115-0.029 1.128-0.036 1.143-0.043 1.158-0.078 1.767-0.06 1.198-0.106 1.832-0.12 1.875-0.138 1.92-0.208 2.633-0.115 1.35-0.122 1.375-0.197 2.106-0.213 2.164-0.31 2.977-0.251 2.307-0.268 2.371-0.383 3.27-0.412 3.395-0.442 3.528-0.595 4.607-0.64 4.836-0.547 4.041-2.52 18.408-0.813 6.102-0.572 4.412-0.495 3.963-0.291 2.423-0.422 3.713-0.253 2.397-0.222 2.265-0.142 1.556-0.177 2.113-0.049 0.622c-0.04 0.517-0.077 1.03-0.113 1.542l-0.063 0.92-0.098 1.535-0.067 1.154-0.056 1.115-0.046 1.073-0.037 1.033-0.027 0.99-0.018 0.95-0.008 0.906v0.437l0.005 0.84 0.014 0.798 0.024 0.752 0.039 0.851 0.957 1.205c34.772 44.068 53.83 94.986 54.229 148.28v1.683c0 83.459-38.319 163.265-106.095 214.099-28.706 21.533-63.37 38.442-102.552 50.635 10.739 21.22 16.366 41.779 16.543 61.802l0.005 0.974V918c0 17.673-14.327 32-32 32-17.497 0-31.714-14.042-31.996-31.47l-0.004-0.53V733.469c0-12.49-5.22-27.792-16.299-45.67l-0.886-1.418c-2.997-4.74-6.4-9.659-10.223-14.751l-0.786-1.04a31.773 31.773 0 0 1-4.814-8.452 31.8 31.8 0 0 1-1.858-7.435 31.836 31.836 0 0 1 2.911-17.872 31.755 31.755 0 0 1 4.673-7.107 31.848 31.848 0 0 1 12.357-8.768l0.18-0.07 0.156-0.06c0.14-0.055 0.281-0.108 0.422-0.16l0.041-0.014a31.69 31.69 0 0 1 4.88-1.361l-0.381 0.081c48.847-10.151 90.314-27.323 121.229-50.513C813.853 530.346 843 469.641 843 405.96c0-40.68-15.192-79.967-43.952-114.619-6.678-8.047-9.546-17.165-10.725-27.973-0.714-6.55-0.755-13.866-0.272-22.374l0.104-1.738 0.048-0.746c0.048-0.744 0.099-1.482 0.152-2.218l0.166-2.209 0.177-2.147 0.222-2.463 0.212-2.175 0.234-2.257 0.398-3.583 0.406-3.436 0.522-4.212 0.67-5.193 1.118-8.358 1.04-7.614 1.14-8.279 0.85-6.313 0.557-4.242 0.513-4.027 0.288-2.318 0.446-3.7 0.405-3.508 0.294-2.672 0.203-1.928 0.19-1.864 0.173-1.804 0.134-1.466-23.747 12.922-4.579 2.474-2.87 1.539-3.449 1.835-1.352 0.715-2.144 1.128-2.114 1.103-2.084 1.08-2.055 1.057-2.027 1.033-1.999 1.01-1.972 0.987-0.977 0.485-2.892 1.422-1.898 0.92c-0.314 0.153-0.627 0.303-0.94 0.453l-1.863 0.888-1.84 0.867c-0.916 0.428-1.823 0.848-2.723 1.26l-1.79 0.815-0.887 0.399-1.762 0.784-0.874 0.384-1.735 0.754-0.861 0.37-1.71 0.724-1.696 0.704-1.68 0.686c-0.558 0.226-1.114 0.448-1.668 0.667l-1.654 0.649c-0.55 0.213-1.097 0.423-1.642 0.63l-1.632 0.612-1.62 0.594-0.808 0.291-1.607 0.568-1.599 0.551-0.796 0.27c-22.154 7.432-41.43 9.635-59.205 4.372-36.56-10.827-75.79-16.47-116.138-16.47-34.516 0-68.229 4.129-100.183 12.116l-1.68 0.424c-23.136 5.893-46.24 3.314-70.526-5.913a210.629 210.629 0 0 1-9.102-3.693l-0.937-0.41-1.875-0.837-1.408-0.644-1.414-0.66-0.947-0.45-1.43-0.689-1.442-0.709-0.97-0.484-0.98-0.494-1.984-1.018-2.027-1.062-1.552-0.827-1.583-0.855-1.616-0.884-1.652-0.914-1.692-0.947-1.734-0.98-2.383-1.36-3.102-1.793-3.92-2.294-2.745-1.621-5.079-3.025-11.695-7.01-3.848-2.286-3.362-1.975-2.36-1.367-2.2-1.256-1.506-0.848-1.77-0.983-0.913-0.5-0.698-0.381-0.093 0.641-0.157 1.131-0.152 1.16-0.074 0.591-0.144 1.203-0.139 1.233-0.133 1.262-0.191 1.948-0.18 2.016-0.113 1.38-0.108 1.412-0.104 1.442-0.098 1.472-0.094 1.503-0.09 1.533-0.083 1.565-0.118 2.406-0.107 2.476-0.097 2.547-0.086 2.62-0.052 1.786-0.048 1.818-0.063 2.789-0.037 1.9-0.047 2.911-0.026 1.983-0.047 4.756-0.031 5.83-0.011 5.895-0.009 16.084-0.029 7.372-0.04 4.756-0.044 3.323-0.057 3.054-0.083 3.23-0.062 1.912-0.07 1.853-0.078 1.753-0.048 0.986-0.068 1.311-0.093 1.645-0.054 0.89c-0.407 6.486-1.021 12.005-1.966 16.903-1.642 8.513-4.148 15.463-9.436 22.014-27.505 34.082-42.002 72.494-42.002 112.238 0 60.104 33.061 122.348 87.13 162.901 35.686 26.767 81.861 45.038 136.312 54.205 1.759 0.281 3.5 0.712 5.205 1.29 0.03 0.012 0.06 0.022 0.09 0.032a24.393 24.393 0 0 1 0.738 0.263c0.128 0.047 0.254 0.095 0.38 0.143l0.04 0.017a31.932 31.932 0 0 1 15.38 12.568 31.865 31.865 0 0 1 4.624 22.577 31.851 31.851 0 0 1-8.318 16.704l0.436-0.485c-0.99 1.09-1.952 2.172-2.888 3.246l-1.11 1.285a172.775 172.775 0 0 0-6.593 8.172l-0.92 1.229c-11.637 15.725-17.087 29.595-17.225 41.55l-0.003 0.465 0.001 68.053a32.62 32.62 0 0 1 0 1.39l-0.001 116.434c0 17.673-14.327 32-32 32-17.496 0-31.713-14.042-31.996-31.471l-0.004-0.53v-85.132h-57.066c-20.435 0-40.2-6.64-59.18-18.52-15.106-9.457-29.484-22.078-43.365-37.311-10.958-12.025-21.228-25.257-30.997-39.436l-1.31-1.909-1.264-1.86-0.618-0.917-1.211-1.808-1.184-1.785-1.163-1.772-0.575-0.884-1.144-1.77-1.14-1.782-1.143-1.804-1.152-1.834-1.167-1.875-1.19-1.926-1.22-1.987-1.9-3.115-0.654-1.079c-3.988-6.579-9.336-9.967-18.662-11.201l-0.504-0.064c-17.542-2.145-30.024-18.105-27.88-35.648 2.146-17.542 18.105-30.024 35.648-27.88 28.696 3.51 51.659 17.747 66.127 41.617l1.47 2.415 1.455 2.373 0.723 1.171 1.436 2.313 1.426 2.274 1.417 2.237 1.409 2.202 1.403 2.169c9.808 15.063 19.297 27.759 30.87 40.459 0.415 0.455 0.829 0.906 1.243 1.353l1.24 1.327c0.825 0.877 1.648 1.736 2.468 2.578l1.23 1.251c18.202 18.36 35.137 28.209 48.605 28.425l0.453 0.004h57.066V732.12c0-19.062 5.12-37.964 15.008-56.731-43.866-12.305-82.781-30.747-115.558-55.331-69.74-52.308-112.728-133.24-112.728-214.1 0-52.686 18.239-103.12 51.91-146.985l0.987-1.278 0.079-0.608 0.09-0.762 0.086-0.816 0.084-0.87 0.081-0.924 0.116-1.484 0.036-0.52 0.1-1.572 0.092-1.649 0.101-2.105 0.1-2.587 0.053-1.711 0.063-2.558 0.044-2.377 0.046-3.489 0.042-5.52 0.026-9.886 0.01-16.233 0.03-6.683 0.035-4 0.036-3.107 0.029-2.08 0.034-2.05 0.038-2.023 0.042-1.994 0.047-1.966 0.079-2.897 0.09-2.836 0.101-2.778 0.074-1.819 0.079-1.793 0.129-2.644 0.14-2.588 0.102-1.696 0.107-1.673 0.113-1.649 0.119-1.626 0.19-2.399 0.135-1.571 0.14-1.55 0.148-1.53 0.154-1.51 0.161-1.488 0.168-1.47 0.087-0.726 0.178-1.44 0.186-1.422 0.193-1.403 0.2-1.385 0.207-1.368 0.216-1.35 0.223-1.334 0.23-1.317 0.24-1.302c0.04-0.215 0.08-0.43 0.122-0.644l0.25-1.278 0.26-1.263 0.267-1.249 0.276-1.234 0.285-1.22 0.293-1.207 0.302-1.194 0.31-1.181c3.806-14.18 9.58-25.536 19.415-33.946 14.031-11.999 32.335-13.9 49.522-6.514 6.255 2.688 12.625 5.804 19.407 9.44l0.977 0.525 1.909 1.035 1.408 0.773 2.711 1.51 2.682 1.522 2.475 1.427 1.874 1.093 4.109 2.423 6.295 3.756 8.096 4.858 4.623 2.754 4.268 2.515 2.85 1.66 2.17 1.25 1.567 0.895 2.014 1.139 1.459 0.814 1.879 1.035 0.913 0.497 1.339 0.721 1.732 0.918 1.263 0.657 1.234 0.631 0.406 0.205 0.764 0.383c4.302 2.143 8.157 3.847 12.115 5.386l0.7 0.27 0.35 0.134c12.877 4.892 22.978 6.02 32 3.721 37.628-9.584 77.224-14.52 117.66-14.52 46.478 0 91.829 6.524 134.31 19.103l0.22 0.056c0.12 0.026 0.259 0.05 0.413 0.071l0.332 0.038c0.118 0.01 0.243 0.02 0.376 0.028l0.422 0.018 0.227 0.005h0.488c0.085 0 0.172-0.002 0.261-0.004l0.555-0.019 0.295-0.015 0.622-0.041c0.43-0.033 0.89-0.077 1.38-0.132 4.038-0.462 9.105-1.68 15.084-3.687l1.174-0.4 1.19-0.417 1.207-0.434 1.223-0.45 1.24-0.47 1.258-0.486 0.635-0.25 1.285-0.513 1.304-0.531 1.323-0.55 1.342-0.567 1.363-0.587 1.384-0.605 0.7-0.31 1.416-0.633 1.439-0.653 1.46-0.673 1.484-0.691 1.507-0.712 1.532-0.731 1.556-0.752 1.581-0.772 1.607-0.792 1.633-0.813 1.659-0.833 1.686-0.855 1.714-0.876 1.742-0.897 2.667-1.386 2.733-1.434 3.063-1.624 2.538-1.356 4.733-2.55 22.134-12.071 5.8-3.137 1.96-1.05 2.76-1.471 1.788-0.946 1.748-0.919 2.55-1.33 2.472-1.275 1.607-0.82 1.577-0.798 2.314-1.157 1.51-0.746 1.486-0.727 1.466-0.708 1.446-0.691 1.429-0.674c0.236-0.111 0.472-0.222 0.708-0.331 7.914-3.687 16.048-5.558 24.572-4.893z" p-id="5379"></path></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://poolbee.github.io/page/links/'
                        target="_blank"
                        title="Wechat"
                        rel="me"
                    >
                        
                        
                            <?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg class="icon" width="24px" height="24.00px" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M767.818667 409.173333C867.338667 444.266667 938.666667 539.136 938.666667 650.666667c0 42.709333-10.496 83.978667-30.261334 120.842666-1.792 3.338667-4.992 8.928-9.696 16.96l14.613334 53.557334c6.506667 23.893333-15.402667 45.813333-39.296 39.296l-53.642667-14.634667-6.229333 3.669333A254.933333 254.933333 0 0 1 682.666667 906.666667c-77.994667 0-147.84-34.88-194.805334-89.888a352.608 352.608 0 0 1-56.64 4.554666c-63.338667 0-124.266667-16.853333-177.472-48.298666-1.834667-1.088-6.410667-3.733333-13.632-7.893334l-80.544 21.653334c-23.914667 6.432-45.76-15.573333-39.146666-39.434667l21.792-78.752a961.205333 961.205333 0 0 1-15.904-27.317333A336.384 336.384 0 0 1 85.333333 480c0-188.618667 154.965333-341.333333 345.888-341.333333 159.914667 0 297.984 108.010667 335.818667 259.296 0.949333 3.765333 1.173333 7.552 0.778667 11.2z m-68.106667-13.952C662.88 282.037333 555.178667 202.666667 431.221333 202.666667 275.434667 202.666667 149.333333 326.933333 149.333333 480c0 46.272 11.498667 90.837333 33.194667 130.698667 2.88 5.290667 10.176 17.706667 21.621333 36.746666a32 32 0 0 1 3.413334 25.013334l-10.517334 37.994666 39.232-10.549333a32 32 0 0 1 24.234667 3.146667c14.272 8.192 22.773333 13.098667 25.802667 14.890666A283.882667 283.882667 0 0 0 431.221333 757.333333c6.154667 0 12.288-0.192 18.389334-0.576A255.061333 255.061333 0 0 1 426.666667 650.666667c0-141.386667 114.613333-256 256-256 5.728 0 11.413333 0.192 17.045333 0.554666z m133.706667 397.056a32 32 0 0 1 3.338666-24.725333 996.672 996.672 0 0 0 15.242667-26.293333A190.997333 190.997333 0 0 0 874.666667 650.666667c0-106.037333-85.962667-192-192-192s-192 85.962667-192 192 85.962667 192 192 192a190.933333 190.933333 0 0 0 98.570666-27.2c2.208-1.322667 8.288-4.874667 18.517334-10.837334a32 32 0 0 1 24.522666-3.210666l12.565334 3.424-3.424-12.565334zM330.666667 426.666667a42.666667 42.666667 0 1 1 0-85.333334 42.666667 42.666667 0 0 1 0 85.333334z m192 0a42.666667 42.666667 0 1 1 0-85.333334 42.666667 42.666667 0 0 1 0 85.333334z m85.333333 202.666666a32 32 0 1 1 0-64 32 32 0 0 1 0 64z m149.333333 0a32 32 0 1 1 0-64 32 32 0 0 1 0 64z"  /></svg>
                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>首页&amp;文章</span>
            </a>
        </li>
        
        
        <li >
            <a href='/page/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>关于我 About me</span>
            </a>
        </li>
        
        
        <li >
            <a href='/page/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>分类</span>
            </a>
        </li>
        
        
        <li >
            <a href='/page/soft/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-messages" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M21 14l-3 -3h-7a1 1 0 0 1 -1 -1v-6a1 1 0 0 1 1 -1h9a1 1 0 0 1 1 1v10" />
  <path d="M14 15v2a1 1 0 0 1 -1 1h-7l-3 3v-10a1 1 0 0 1 1 -1h2" />
</svg>



                
                <span>软件&amp;网站</span>
            </a>
        </li>
        
        
        <li >
            <a href='/page/share/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>日常分享</span>
            </a>
        </li>
        
        
        <li >
            <a href='/page/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>链接</span>
            </a>
        </li>
        
        
        <li >
            <a href='/page/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>搜索</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">
        

                
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>暗色模式</span>
                </li>
                
            </ol>
        </li>
    
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">目录</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ul>
    <li><a href="#1正向代理">1正向代理：</a>
      <ul>
        <li><a href="#代理客户端的本机上装的">代理客户端的，本机上装的。</a></li>
      </ul>
    </li>
    <li><a href="#反向代理">反向代理：</a>
      <ul>
        <li><a href="#代理服务器端的">代理服务器端的，</a></li>
      </ul>
    </li>
    <li><a href="#2负载均衡">2负载均衡：</a>
      <ul>
        <li><a href="#权重轮询和加权轮询">权重、轮询和加权轮询。</a></li>
        <li><a href="#iphash">IPhash:</a></li>
      </ul>
    </li>
    <li><a href="#3动静分离">3动静分离</a></li>
  </ul>

  <ul>
    <li><a href="#05nginx安装-linux_哔哩哔哩_bilibilihttpswwwbilibilicomvideobv1f5411j7vkp5spm_id_frompagedrivervd_source7380129e81d052c5b32ce598508c71d5"><a href="https://www.bilibili.com/video/BV1F5411J7vK/?p=5&amp;spm_id_from=pageDriver&amp;vd_source=7380129e81d052c5b32ce598508c71d5">05、Nginx安装-Linux_哔哩哔哩_bilibili</a></a></li>
    <li><a href="#whereis-nginx">whereis nginx</a>
      <ul>
        <li></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#启动">启动：</a></li>
        <li><a href="#宝塔的nginx">宝塔的nginx</a></li>
      </ul>
    </li>
    <li><a href="#重点参考">重点参考</a>
      <ul>
        <li></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#1-创建一个新的-hugo-站点">1. <strong>创建一个新的 Hugo 站点</strong></a></li>
        <li><a href="#2-添加主题">2. <strong>添加主题</strong></a></li>
        <li><a href="#3-生成站点">3. <strong>生成站点</strong></a></li>
        <li><a href="#4-运行开发服务器">4. <strong>运行开发服务器</strong></a></li>
        <li><a href="#5-查看-hugo-版本">5. <strong>查看 Hugo 版本</strong></a></li>
        <li><a href="#6-构建静态文件">6. <strong>构建静态文件</strong></a></li>
        <li><a href="#7-指定配置文件">7. <strong>指定配置文件</strong></a></li>
        <li><a href="#1-在项目的根目录下创建-dockerfile">1. <strong>在项目的根目录下创建 Dockerfile</strong></a></li>
        <li><a href="#2-创建-dockerfile">2. <strong>创建 Dockerfile</strong></a></li>
        <li><a href="#3-使用-dockerfile-构建镜像">3. <strong>使用 Dockerfile 构建镜像</strong></a></li>
        <li><a href="#4-使用-docker-compose">4. <strong>使用 Docker Compose</strong></a></li>
        <li><a href="#5-选择子目录">5. <strong>选择子目录</strong></a></li>
        <li><a href="#总结">总结</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li><a href="#懂linux和springboot">懂linux和springboot</a></li>
  </ul>

  <ul>
    <li><a href="#为什么出现">为什么出现?</a>
      <ul>
        <li><a href="#发布jar包或者war包">发布jar包或者war包</a></li>
        <li><a href="#带上环境发布">带上环境发布。</a></li>
      </ul>
    </li>
    <li><a href="#docker的历史">Docker的历史</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#docker能干嘛">Docker能干嘛?</a></li>
    <li><a href="#devops开发运维">DevOps（开发、运维）</a></li>
    <li><a href="#docker安装">Docker安装</a>
      <ul>
        <li><a href="#docker的基本组成">Docker的基本组成</a></li>
        <li><a href="#安装docker">安装Docker</a></li>
        <li><a href="#阿里云镜像加速">阿里云镜像加速</a></li>
        <li><a href="#回顾hello-world">回顾hello-world</a></li>
        <li><a href="#底层原理">底层原理</a></li>
        <li><a href="#docker为什么比虚拟机快">Docker为什么比虚拟机快？</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li><a href="#帮助命令">帮助命令:</a></li>
    <li><a href="#镜像命令">镜像命令</a></li>
    <li><a href="#容器命令">容器命令</a>
      <ul>
        <li><a href="#退出容器">退出容器</a></li>
        <li><a href="#删除容器">删除容器</a></li>
        <li><a href="#启动和停止容器的操作">启动和停止容器的操作</a></li>
      </ul>
    </li>
    <li><a href="#常用的其他命令">常用的其他命令</a>
      <ul>
        <li><a href="#查看日志">查看日志</a></li>
        <li><a href="#查看容器top">查看容器top</a></li>
        <li><a href="#进入当前正在运行的容器">!!!!进入当前正在运行的容器</a></li>
        <li><a href="#我的好像exit后容器好像还是在运行的必须要stop">我的好像exit后容器好像还是在运行的必须要stop，</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li><a href="#联合文件系统unionfs">联合文件系统UnionFS</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#分层">分层</a></li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#弱小和无知不是生存的障碍傲慢才是">弱小和无知不是生存的障碍，傲慢才是。</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li><a href="#什么是容器数据卷">什么是容器数据卷？</a>
      <ul>
        <li><a href="#总结容器的持久化和同步操作容器间也是可以数据共享的">总结：容器的持久化和同步操作容器间也是可以数据共享的！</a></li>
      </ul>
    </li>
    <li><a href="#使用数据卷">使用数据卷</a>
      <ul>
        <li></li>
        <li><a href="#实战安装mysql">实战：安装MySQL</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li></li>
        <li><a href="#官方名词具名和匿名挂载">官方名词：具名和匿名挂载</a></li>
      </ul>
    </li>
    <li><a href="#具名挂载">具名挂载</a></li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#总结-1">总结</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li><a href="#数据卷容器多个容器之间同步">数据卷容器（多个容器之间同步）</a>
      <ul>
        <li></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#基础知识">基础知识</a></li>
    <li><a href="#dockerfile的指令">DockerFile的指令</a></li>
    <li><a href="#实战测试">实战测试</a></li>
  </ul>
</nav>
        </div>
    </section>

            
        
            
                
<a id="back-to-top" href="#">
    <?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg class="icon" width="48px" height="48.00px" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M526.848 202.24A20.48 20.48 0 0 0 512 196.096a19.68 19.68 0 0 0-14.848 6.144l-155.136 154.624a21.632 21.632 0 0 0 0 30.208 21.632 21.632 0 0 0 30.208 0L512 247.296l139.776 139.776a21.376 21.376 0 0 0 14.848 6.144 20.48 20.48 0 0 0 14.848-6.144 21.632 21.632 0 0 0 0-30.208L526.848 202.24zM116.224 595.968h90.624v231.936h42.496v-231.936h90.624v-42.496H115.712v42.496h0.512z m458.24-42.496h-112.64c-13.824 0-27.136 5.12-37.376 15.36-10.24 10.24-15.36 24.064-15.36 37.376v168.448c0 13.824 5.12 27.136 15.36 37.376 10.24 10.24 24.064 15.36 37.376 15.36h112.64c13.824 0 27.136-5.12 37.376-15.36 10.24-10.24 15.36-24.064 15.36-37.376v-168.448c0-13.824-5.12-27.136-15.36-37.376-10.24-10.24-23.552-15.36-37.376-15.36z m10.752 221.696c0 2.048-0.512 5.12-3.072 7.68a10.688 10.688 0 0 1-7.68 3.072h-112.64a10.688 10.688 0 0 1-7.68-3.072 10.688 10.688 0 0 1-3.072-7.68V606.72c0-2.048 0.512-5.12 3.072-7.68a10.688 10.688 0 0 1 7.68-3.072h112.64c2.048 0 5.12 0.512 7.68 3.072 2.56 2.56 3.072 5.632 3.072 7.68v168.448z m307.2-205.824a53.12 53.12 0 0 0-37.376-15.36h-145.408v274.432h42.496v-120.32h102.912c13.824 0 27.136-5.12 37.376-15.36 10.24-10.24 15.36-24.064 15.36-37.376v-48.128c0-14.336-5.12-27.648-15.36-37.888z m-27.136 84.992c0 2.048-0.512 5.12-3.072 7.68a10.688 10.688 0 0 1-7.68 3.072h-103.424v-69.12h103.936c2.048 0 5.12 0.512 7.68 3.072 2.56 2.56 3.072 5.632 3.072 7.68v47.616h-0.512z"  /></svg>
</a>

            
        
            
                <form action="/page/search/" class="search-form widget" >
        <p>
            <label>搜索</label>
            <input name="keyword" required placeholder="输入关键词..." />
        
            <button title="搜索">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



            </button>
        </p>
    </form>
            
        
        <div style="height: 30%;width: 30%">
            
            <script type="text/javascript" id="clstr_globe" src="//clustrmaps.com/globe.js?d=vWVduL3EI8o8M2YkHMyY1dtYyf7vfgNKC8KQ1ugXVMw"></script>
        </div>
    </aside>



        



        <main class="main full-width">
    <article class="main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/post/%E8%85%BE%E8%AE%AF%E4%BA%91%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/">
                <img src="/img/defaultimage2_hu0d7034ba65a92233e29b1da081aeb4e3_2051_800x0_resize_box_3.png"
                        srcset="/img/defaultimage2_hu0d7034ba65a92233e29b1da081aeb4e3_2051_800x0_resize_box_3.png 800w, /img/defaultimage2_hu0d7034ba65a92233e29b1da081aeb4e3_2051_1600x0_resize_box_3.png 1600w"
                        width="800" 
                        height="119" 
                        loading="lazy"
                        alt="Featured image of post " />
                
            </a>
        </div>
    

    <div class="article-details">
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/post/%E8%85%BE%E8%AE%AF%E4%BA%91%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/"></a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    阅读时长: 21 分钟
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <p>用户名root</p>
<p>vnc登陆，密码是_1的那个</p>
<p>创建git_1用户，用于git</p>
<p>用户：git_1</p>
<p>密码：6.29-gitone</p>
<p>到这一步了：[git_1@VM-12-5-centos ~]$ git init &ndash;bare hugo.git
Initialized empty Git repository in /home/git_1/hugo.git/
[git_1@VM-12-5-centos ~]$</p>
<h1 id="基础操作">基础操作
</h1><p>切换到rooot用户</p>
<p>su - root</p>
<p>输入腾讯云的密码（root账号的密码_1的）</p>
<p><a class="link" href="https://blog.csdn.net/hyfsbxg/article/details/122322125"  target="_blank" rel="noopener"
    >Nginx详解（一文带你搞懂Nginx）-CSDN博客</a></p>
<p><a class="link" href="https://developer.aliyun.com/article/878980"  target="_blank" rel="noopener"
    >全面解析｜搞懂Nginx这一篇就够了-阿里云开发者社区 (aliyun.com)</a></p>
<p><a class="link" href="https://www.kuangstudy.com/bbs/1353634800149213186"  target="_blank" rel="noopener"
    >Nginx快速入门-KuangStudy-文章</a></p>
<p><a class="link" href="https://stonecoding.net/system/nginx/nginx.html"  target="_blank" rel="noopener"
    >Nginx | 程序开发与运维 (stonecoding.net)</a></p>
<p>加权重</p>
<p>架构上解决不了的问题，没有是加一层是解决不了的问题。JDBC也是如此</p>
<h1 id="nginx">nginx
</h1><p>高性能：响应更快和并发更高。占用内存少、并发能力强。</p>
<ul>
<li>反向代理：</li>
</ul>
<h2 id="1正向代理">1正向代理：
</h2><h3 id="代理客户端的本机上装的">代理客户端的，本机上装的。
</h3><p>例如：</p>
<ul>
<li>
<p>VPN、访问不了外网的，为什么用了vpn就能用了，代理服务器帮助请求外部资源。</p>
</li>
<li>
<p>请求内地-香港-美国-返回-香港-美国</p>
</li>
<li>
<p>客户端的</p>
<ul>
<li>服务端的</li>
</ul>
</li>
</ul>
<h2 id="反向代理">反向代理：
</h2><h3 id="代理服务器端的">代理服务器端的，
</h3><p>无感知去浏览一个服务器资源的，让服务器更好部署上线</p>
<ul>
<li>访问百度、背后不止一个服务器的，请求就是一个IP或者网址.
<ul>
<li>因为服务端有一个代理服务器。</li>
</ul>
</li>
</ul>
<h2 id="2负载均衡">2负载均衡：
</h2><p>64G、32G、16G服务器；</p>
<h3 id="权重轮询和加权轮询">权重、轮询和加权轮询。
</h3><p>请求就是依次轮询；</p>
<p>加权轮询就是加了权重的轮询，很小内存的服务器也能正常上线。</p>
<h3 id="iphash">IPhash:
</h3><p>Session保存在tomcat中，每个服务器中都有一个tomcat，而每个tomcat中的session不共享的。</p>
<p>n个服务器n个tomcat</p>
<p>一、加redis解决</p>
<p>建议用redis做session共享。</p>
<p>二、negix默认算法</p>
<p>negix的默认算法：</p>
<p>小明的请求固定的IP固定永远请求到固定的服务器上。</p>
<p>session就不会丢失,但是该服务器挂了session就挂了。性能不是很好。</p>
<p>所以不推荐用negix</p>
<h2 id="3动静分离">3动静分离
</h2><p>例如：bootstrap的jquery的js</p>
<p>静态资源每次从jar包中加载很麻烦；</p>
<p>nginx能做到静态资源的存储，提示访问速度。</p>
<h1 id="nginx安装">Nginx安装
</h1><p>windows解压安装即可。</p>
<p>conf的配置文件；</p>
<p>nginx的config文件。</p>
<p>里面的80端口，那么就会通过80端口。</p>
<p>访问localhost:80端口是被监听的。</p>
<p>http的默认端口就是80端口。</p>
<h2 id="05nginx安装-linux_哔哩哔哩_bilibilihttpswwwbilibilicomvideobv1f5411j7vkp5spm_id_frompagedrivervd_source7380129e81d052c5b32ce598508c71d5"><a class="link" href="https://www.bilibili.com/video/BV1F5411J7vK/?p=5&amp;spm_id_from=pageDriver&amp;vd_source=7380129e81d052c5b32ce598508c71d5"  target="_blank" rel="noopener"
    >05、Nginx安装-Linux_哔哩哔哩_bilibili</a>
</h2><h2 id="whereis-nginx">whereis nginx
</h2><h4 id="更换nginx默认端口">更换nginx默认端口
</h4><p>检查</p>
<p>tar -zxvf 文件名称。</p>
<p>conf配置文件</p>
<h1 id="输入">输入
</h1><p>./configure</p>
<p>然后输入</p>
<p>make</p>
<p>然后输入</p>
<p>make install</p>
<p>也可以用yum安装。</p>
<p>在这里看配置文件</p>
<p>cd conf/</p>
<p>检查linux防火墙和80端口安全组。</p>
<h3 id="启动">启动：
</h3><p>配置中location中可以负载均衡配置，走不同的服务器。</p>
<p>代中的代理：proxy_pass中访问在这个服务器中。</p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240802174353998.png"
	
	
	
	loading="lazy"
	
		alt="image-20240802174353998"
	
	
></p>
<h4 id="端口重写">端口重写
</h4><p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240802175127022.png"
	
	
	
	loading="lazy"
	
		alt="image-20240802175127022"
	
	
></p>
<p>一个人真正的可怕是从他开始专注和聚焦开始，任何行业都是一年入门，三年得其要领，五年小有所成，十年才能成为高手。很多年轻人急于求成，先给自己定个三年小目标，在一个自己热爱的行业深耕，十年磨一剑。</p>
<p>关于成长的几个阶段<img src="https://i0.hdslb.com/bfs/emote/b841a6974a4552d8773792943d5d0d12249dfe42.png@44w_44h.webp"
	
	
	
	loading="lazy"
	
		alt="[13周年]"
	
	
>  第一见天地，也叫行万里路，从成年后可以离开家乡起，一定要花时间去祖国大江南北转转，不要嫌苦和累，有条件的，就去世界各地看看，了解最基础的地理知识。明白地域对于人的重要性。了解不同地域下塑造的不同文化语言，乡俗约定，思维习惯。  第二见众生，广交天下友，接触不同的人，总结不同的人性，层级，明白人的局限性，和各种人思维碰撞，了解每个人的生活方式，知道自己的层级，知道自己在哪，要去哪。  第三见自己，读万卷书，古往今来中外的各种书，寻找各种有价值的信息，不断的参悟，不断的对这个世界，在脑子中建模，什么不懂就去请教，哪里有疑惑就可以去查资料，不断的了解世界。</p>
<p>好学校，去大厂做算法，普通学校，有机会去做算法（前提是你得手握顶会，且技能过硬）。不过最终大概率是技术流选择Java开发，躺平流选择考公，考编制，或者去国企</p>
<h3 id="宝塔的nginx">宝塔的nginx
</h3><p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240802185932647.png"
	
	
	
	loading="lazy"
	
		alt="image-20240802185932647"
	
	
></p>
<p>就是nginx.conf</p>
<p>文件</p>
<p>nginx的目录如下，nginx.conf是修改的主要内容。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SH" data-lang="SH"><span style="display:flex;"><span>root@stone ~<span style="color:#f92672">]</span><span style="color:#75715e"># rpm -ql nginx</span>
</span></span><span style="display:flex;"><span>/etc/logrotate.d/nginx
</span></span><span style="display:flex;"><span>/etc/nginx
</span></span><span style="display:flex;"><span>/etc/nginx/conf.d
</span></span><span style="display:flex;"><span>/etc/nginx/conf.d/default.conf
</span></span><span style="display:flex;"><span>/etc/nginx/fastcgi_params
</span></span><span style="display:flex;"><span>/etc/nginx/mime.types
</span></span><span style="display:flex;"><span>/etc/nginx/modules
</span></span><span style="display:flex;"><span>/etc/nginx/nginx.conf
</span></span><span style="display:flex;"><span>/etc/nginx/scgi_params
</span></span><span style="display:flex;"><span>/etc/nginx/uwsgi_params
</span></span><span style="display:flex;"><span>/usr/lib/systemd/system/nginx-debug.service
</span></span><span style="display:flex;"><span>/usr/lib/systemd/system/nginx.service
</span></span><span style="display:flex;"><span>/usr/lib64/nginx
</span></span><span style="display:flex;"><span>/usr/lib64/nginx/modules
</span></span><span style="display:flex;"><span>/usr/libexec/initscripts/legacy-actions/nginx
</span></span><span style="display:flex;"><span>/usr/libexec/initscripts/legacy-actions/nginx/check-reload
</span></span><span style="display:flex;"><span>/usr/libexec/initscripts/legacy-actions/nginx/upgrade
</span></span><span style="display:flex;"><span>/usr/sbin/nginx
</span></span><span style="display:flex;"><span>/usr/sbin/nginx-debug
</span></span><span style="display:flex;"><span>/usr/share/doc/nginx-1.24.0
</span></span><span style="display:flex;"><span>/usr/share/doc/nginx-1.24.0/COPYRIGHT
</span></span><span style="display:flex;"><span>/usr/share/man/man8/nginx.8.gz
</span></span><span style="display:flex;"><span>/usr/share/nginx
</span></span><span style="display:flex;"><span>/usr/share/nginx/html
</span></span><span style="display:flex;"><span>/usr/share/nginx/html/50x.html
</span></span><span style="display:flex;"><span>/usr/share/nginx/html/index.html
</span></span><span style="display:flex;"><span>/var/cache/nginx
</span></span><span style="display:flex;"><span>/var/log/nginx
</span></span></code></pre></div><p><a class="link" href="https://github.com/mqyqingfeng/Blog/issues/243"  target="_blank" rel="noopener"
    >一篇教你博客如何部署到自己的服务器 · Issue #243 · mqyqingfeng/Blog (github.com)</a></p>
<h2 id="重点参考">重点参考
</h2><p>设置了git_1的这个用户</p>
<h4 id="wegt下载">wegt下载
</h4><h1 id="问题">问题
</h1><p>[git_1@VM-12-5-centos hugo]$ hugo version
hugo: /lib64/libstdc++.so.6: version <code>GLIBCXX_3.4.20' not found (required by hugo) hugo: /lib64/libstdc++.so.6: version </code>CXXABI_1.3.8&rsquo; not found (required by hugo)
hugo: /lib64/libstdc++.so.6: version `GLIBCXX_3.4.21&rsquo; not found (required by hugo)</p>
<p>查看</p>
<p>strings /usr/lib64/libstdc++.so.6 | grep GLIBC</p>
<p><a class="link" href="https://blog.csdn.net/zhangyingna667/article/details/107290495"  target="_blank" rel="noopener"
    >解决报错‘version `GLIBCXX_3.4.20‘ not found’_version glibcxx not found-CSDN博客</a></p>
<p>确实有用！！</p>
<p>最新的<a class="link" href="https://devwl.com/posts/nginx&#43;hugo/"  target="_blank" rel="noopener"
    >Nginx+Hugo搭建博客并部署到服务器 | Ryn (devwl.com)</a></p>
<p><a class="link" href="https://blog.csdn.net/wbsu2004/article/details/125757009"  target="_blank" rel="noopener"
    >基于docker搭建Hugo_hugo docker-CSDN博客</a></p>
<h1 id="docker">docker
</h1><p># 创建一个新的 hugo 站点 docker run &ndash;rm -it \   -v $(pwd)/src:/src \   klakegg/hugo:latest-ext \   &ldquo;new site . &ndash;force&rdquo; 这是在做什么?</p>
<p>ChatGPT</p>
<p>这个命令在用 Docker 创建一个新的 Hugo 站点。具体来说：</p>
<ul>
<li><code>docker run --rm -it</code>：运行一个 Docker 容器，并在容器退出后自动删除容器。<code>-it</code> 选项使容器以交互模式运行，这样你可以看到输出并进行交互。</li>
<li><code>-v $(pwd)/src:/src</code>：将当前目录的 <code>src</code> 子目录挂载到 Docker 容器内的 <code>/src</code> 目录。<code>$(pwd)</code> 是一个命令替换，它会被替换成当前的工作目录路径。这个挂载让你可以在主机和容器之间共享文件。</li>
<li><code>klakegg/hugo:latest-ext</code>：指定要使用的 Docker 镜像，这里使用的是 <code>klakegg/hugo</code> 镜像的最新扩展版。这个镜像包含了 Hugo 的最新版本以及一些额外的功能。</li>
<li><code>&quot;new site . --force&quot;</code>：这是传递给 Hugo 的命令。<code>new site .</code> 会在当前目录（挂载的 <code>/src</code> 目录）中创建一个新的 Hugo 站点。<code>--force</code> 选项表示如果目标目录已经存在，则覆盖它。</li>
</ul>
<p>总体而言，这个命令创建了一个新的 Hugo 站点，并将其存储在当前目录的 <code>src</code> 子目录中。</p>
<p>4o mini</p>
<p>我已经安装了hugo的docker如何使用呢？</p>
<p>ChatGPT</p>
<p>如果你已经安装了 Hugo 的 Docker 镜像，你可以使用它来创建、构建和管理 Hugo 站点。以下是一些常见的操作及其对应的 Docker 命令：</p>
<h3 id="1-创建一个新的-hugo-站点">1. <strong>创建一个新的 Hugo 站点</strong>
</h3><p>首先，进入你想要存放 Hugo 站点的目录，然后运行：</p>
<pre tabindex="0"><code>sh
复制代码
docker run --rm -it -v $(pwd):/src klakegg/hugo:latest-ext new site mysite
</code></pre><p>这里的 <code>mysite</code> 是你想要创建的站点目录名。这个命令会在当前目录下创建一个新的 Hugo 站点。</p>
<h3 id="2-添加主题">2. <strong>添加主题</strong>
</h3><p>在 Hugo 站点中添加主题：</p>
<pre tabindex="0"><code>sh
复制代码
docker run --rm -it -v $(pwd)/poolbee:/src klakegg/hugo:latest-ext new theme hugo-themestack-3.26.0
</code></pre><h3 id="3-生成站点">3. <strong>生成站点</strong>
</h3><p>生成静态站点文件（通常是用于发布的内容）：</p>
<p>docker run &ndash;rm -it -v $(pwd)/poolbee:/src klakegg/hugo:latest-ext</p>
<h3 id="4-运行开发服务器">4. <strong>运行开发服务器</strong>
</h3><p>启动 Hugo 的开发服务器，以便在本地预览站点：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmd" data-lang="cmd"><span style="display:flex;"><span>sh
</span></span><span style="display:flex;"><span>复制代码
</span></span><span style="display:flex;"><span>docker run --rm -it -v $(pwd)/poolbee:/src -p 1313:1313 klakegg/hugo:latest-ext server
</span></span></code></pre></div><h3 id="5-查看-hugo-版本">5. <strong>查看 Hugo 版本</strong>
</h3><p>如果你需要查看安装的 Hugo 版本，可以运行：</p>
<pre tabindex="0"><code>sh
复制代码
docker run --rm -it klakegg/hugo:latest-ext version
</code></pre><h3 id="6-构建静态文件">6. <strong>构建静态文件</strong>
</h3><p>如果你只是想构建静态文件而不启动开发服务器：</p>
<pre tabindex="0"><code>sh
复制代码
docker run --rm -it -v $(pwd)/mysite:/src klakegg/hugo:latest-ext -d public
</code></pre><p>这会将生成的静态文件放在 <code>public</code> 目录中。</p>
<h3 id="7-指定配置文件">7. <strong>指定配置文件</strong>
</h3><p>如果你有多个配置文件，或者配置文件不在默认位置，可以指定配置文件：</p>
<pre tabindex="0"><code>sh
复制代码
docker run --rm -it -v $(pwd)/mysite:/src klakegg/hugo:latest-ext --config myconfig.toml
</code></pre><p><code>myconfig.toml</code> 是你自定义的配置文件。</p>
<p>docker run &ndash;rm -it -v $(pwd)/poolbee:/src klakegg/hugo:latest-ext new theme hugo-theme-stack-3.26.0</p>
<p><a class="link" href="https://blog.csdn.net/wbsu2004/article/details/125757009"  target="_blank" rel="noopener"
    >基于docker搭建Hugo_hugo docker-CSDN博客</a></p>
<p><a class="link" href="https://blog.lass.cc/posts/how-to-build-hugo-with-docker/"  target="_blank" rel="noopener"
    >使用Docker搭建Hugo博客 (lass.cc)</a></p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240803010732314.png"
	
	
	
	loading="lazy"
	
		alt="image-20240803010732314"
	
	
></p>
<p>Dockerfile 是用来定义 Docker 镜像的构建过程的文件。它通常位于项目的根目录下，也可以根据需要放置在子目录中。以下是一些常见的做法：</p>
<h3 id="1-在项目的根目录下创建-dockerfile">1. <strong>在项目的根目录下创建 Dockerfile</strong>
</h3><p>这是最常见的做法。在你的项目的根目录下创建一个名为 <code>Dockerfile</code> 的文件，这样 Docker 就能轻松找到它。</p>
<pre tabindex="0"><code>bash复制代码project-root/
├── Dockerfile
├── docker-compose.yml
├── src/
│   └── ... # Hugo 网站源代码
├── themes/
│   └── ... # Hugo 主题
└── ... # 其他项目文件
</code></pre><h3 id="2-创建-dockerfile">2. <strong>创建 Dockerfile</strong>
</h3><p>在根目录下创建一个名为 <code>Dockerfile</code> 的文件，然后将之前提供的 Dockerfile 内容写入到该文件中：</p>
<pre tabindex="0"><code>Dockerfile复制代码# Dockerfile
FROM node:14-alpine as node_modules

ENV LANG en_US.UTF-8
ENV LANGUAGE en_US.UTF-8
ENV LC_ALL=en_US.UTF-8

RUN echo &#34;Asia/Shanghai&#34; &gt; /etc/timezone

WORKDIR /app

FROM klakegg/hugo:0.107.0-ext-alpine as hugo

WORKDIR /src

COPY ./src/ /src/

# 生成静态文件
RUN hugo

# nginx web 服务器
FROM nginx:1.19.7-alpine

RUN rm -rf /usr/share/nginx/html/*
COPY --from=hugo /src/public /usr/share/nginx/html
</code></pre><h3 id="3-使用-dockerfile-构建镜像">3. <strong>使用 Dockerfile 构建镜像</strong>
</h3><p>在包含 <code>Dockerfile</code> 的目录下运行以下命令来构建 Docker 镜像：</p>
<pre tabindex="0"><code>bash
复制代码
docker build -t your-image-name .
</code></pre><h3 id="4-使用-docker-compose">4. <strong>使用 Docker Compose</strong>
</h3><p>如果你有一个 <code>docker-compose.yml</code> 文件，可以在同一个目录下运行以下命令来构建和启动容器：</p>
<pre tabindex="0"><code>bash
复制代码
docker-compose up --build -d
</code></pre><h3 id="5-选择子目录">5. <strong>选择子目录</strong>
</h3><p>如果你想把 Dockerfile 放在一个子目录中，例如 <code>docker</code> 目录中，你需要在 <code>docker-compose.yml</code> 文件中指定 Dockerfile 的位置：</p>
<p><strong>Dockerfile</strong></p>
<pre tabindex="0"><code>Dockerfile复制代码# 这个文件放在 docker/ 目录下
FROM node:14-alpine as node_modules
...
</code></pre><p><strong>docker-compose.yml</strong></p>
<pre tabindex="0"><code>yaml复制代码version: &#34;3&#34;

services:
  server:
    build:
      context: .
      dockerfile: docker/Dockerfile
    container_name: hugo-server
    restart: always
    ports:
      - &#34;20040:80&#34;
</code></pre><p>确保 <code>docker-compose.yml</code> 文件的 <code>build</code> 部分的 <code>context</code> 指向项目的根目录，而 <code>dockerfile</code> 指向 Dockerfile 的实际路径。</p>
<h3 id="总结">总结
</h3><p>通常情况下，将 Dockerfile 放在项目的根目录下是最简单的做法，这样你可以很方便地管理和构建 Docker 镜像。如果需要，可以根据项目的需求将 Dockerfile 放置在其他位置，并在 <code>docker-compose.yml</code> 中指定它的位置。</p>
<h1 id="真正的博客">真正的博客
</h1><p><a class="link" href="https://blog.lass.cc/archives/#2024"  target="_blank" rel="noopener"
    >Archives (lass.cc)</a></p>
<p><a class="link" href="https://blog.csdn.net/liketimeless/article/details/132242344"  target="_blank" rel="noopener"
    >使用Docker进行搭建WebStack-Hugo导航网站_hugo docker-CSDN博客</a></p>
<h1 id="docker-1">Docker
</h1><p>什么是docker</p>
<h2 id="懂linux和springboot">懂linux和springboot
</h2><p>什么是docker？</p>
<p>java开发工作，必备的技能。</p>
<p>spring——docker</p>
<p>镜像、容器、操作命令</p>
<p>即使再小的帆也能远航。</p>
<ul>
<li>容器数据卷</li>
<li>docker镜像</li>
<li>DockerFile(创作镜像)</li>
<li>Docker网络原理</li>
<li>IDEA整合Docker</li>
</ul>
<p>企业中集群</p>
<ul>
<li>docker Compose</li>
<li>Docker Swarm</li>
</ul>
<p>K8s和Docker Swarm</p>
<p>CI\CD 是如何做的 jenkins</p>
<p><strong>弱小无知不是生存的障碍，傲慢才是</strong></p>
<p>授人以渔</p>
<h1 id="docker概述">Docker概述
</h1><h2 id="为什么出现">为什么出现?
</h2><p>一款产品:开发&ndash;上线 两套环境！</p>
<p>应用环境,应用配置。</p>
<p>开发即运维。</p>
<p>环境配置十分麻烦的。</p>
<p>（集群Redis、ES、Hadoop&hellip;.）</p>
<h3 id="发布jar包或者war包">发布jar包或者war包
</h3><h3 id="带上环境发布">带上环境发布。
</h3><p>项目能不能带上环境安装打包？</p>
<p><a class="link" href="https://www.bilibili.com/video/BV1og4y1q7M4/?p=2&amp;spm_id_from=pageDriver&amp;vd_source=7380129e81d052c5b32ce598508c71d5"  target="_blank" rel="noopener"
    >2、聊聊Docker为什么会出现_哔哩哔哩_bilibili</a></p>
<p>配置麻烦，不能够跨平台。</p>
<p>传统观念：开发jar，运维来做！</p>
<p>现在：开发打包部署上线，一套流程做完。</p>
<p>Docker给以上问题,提出解决方案。</p>
<p>类比：</p>
<p>Java-apk-发布应用商店-使用apk即可</p>
<p>java-jar-打包代环境</p>
<p>Docker思想——集装箱——隔离机制。</p>
<h2 id="docker的历史">Docker的历史
</h2><p>api小子和谈论历史</p>
<p>2010年-美国成立的公司dotCloud做一些pass的云计算服务！</p>
<p>lxc有关的容器技术！</p>
<p>他们将自己的技术（容器化技术）命名为Docker！但是没有引起行业注意！docCloud，就活不下去了。那么</p>
<ul>
<li>开源代码</li>
</ul>
<p>2013年开源！Docker越来越多人发现了docker的优点！火了，Docker每个月都会更新一个版本！</p>
<p>2014年4月9日，Docker1.0发布！</p>
<p>为什么这么火！轻巧！</p>
<p>容器技术出来之前，我们都是使用的虚拟机技术！19G</p>
<p>虚拟机：Vmware虚拟机多台一台电脑，但笨重！</p>
<pre tabindex="0"><code>VM：linux centos原生镜像（一个电脑！）
而docker：隔离，镜像用最核心的环境4m+jdk+mysql 十分的小巧，运行镜像就好了！小巧！几个M几个kb 秒级启动！
</code></pre><ul>
<li>聊聊Docker</li>
</ul>
<p>Docker是基于Go语言开发的！开源项目！</p>
<h4 id="基于官方文档学习"><strong>基于官方文档学习</strong>
</h4><p>docker<strong>的文档是超级详细的</strong></p>
<p>Docker百度百科</p>
<h2 id="docker能干嘛">Docker能干嘛?
</h2><ul>
<li>之前的虚拟机技术：</li>
<li>内核-库-APP</li>
</ul>
<p>虚拟机技术：</p>
<p>1.资源占用十分多</p>
<p>2.冗余步骤多</p>
<p>3.启动很慢</p>
<p>容器化技术：</p>
<p><strong>不是模拟一个完整的操作系统</strong>。</p>
<p>直接用在操作系统上，充分利用操作系统的资源。</p>
<p>不同：</p>
<ul>
<li>传统虚拟机，虚拟一个硬件，运行一个完整的操作系统他，在系统上安装和运行软件。</li>
<li>容器内的引用hi直接运行在宿主机的上的，容器是没有自己的内容的，也没有虚拟硬件。</li>
<li>容器相互隔离，容器都有一个数以自己的文件系统，不糊影响。</li>
</ul>
<h2 id="devops开发运维">DevOps（开发、运维）
</h2><p><strong>更快速的交付和部署</strong></p>
<p>传统：一堆帮助文档，安装程序</p>
<p>Docker：打包镜像发布测试，一键运行</p>
<p><strong>更便捷的升级和扩缩容</strong></p>
<p>使用了Docker之后，我们部署引用就和搭积木一样！</p>
<p>项目打包为一个镜像，扩展——服务器A！服务器B！</p>
<p><strong>更简单的系统运维</strong></p>
<p>容器化之后，我们开发，测试环境都是高度一致的。</p>
<p><strong>更高效的计算资源利用</strong></p>
<p>Docker是内核级别的虚拟化，可以在一个物理机上运行很多的容器实例！服务器的性能能被压榨到极致。</p>
<p>只要学不死，就往死里学！</p>
<h2 id="docker安装">Docker安装
</h2><h3 id="docker的基本组成">Docker的基本组成
</h3><p>Docker<strong>的架构图</strong></p>
<p>Client——服务器——仓库</p>
<p>redis-server</p>
<p>redis-client</p>
<p>镜像：image</p>
<p>相当于模板，用这个模板来创建<strong>容器</strong>服务，tomcat镜像==》run==》tomcat01容器（提供服务器），通过这个镜像可以创建多个荣去</p>
<p><strong>容器：container</strong></p>
<p>Docker的容器技术，独立运行一个或一组应用，通过镜像来创建的。</p>
<p>启动，停止，删除，基本命令！</p>
<p>目前就可以吧这个容器理解为一个建议的linux系统</p>
<p>仓库：repository</p>
<p>仓库就是存放镜像的地方。公有、私有仓库。</p>
<p>Docker Hub（默认国外的）</p>
<p>阿里云，华为都有容器服务器（配置镜像加速）</p>
<h3 id="安装docker">安装Docker
</h3><p>1.需要linux基础</p>
<p>2.CentOS 7</p>
<p>3.Xshell连接远程服务器进行操作</p>
<p>cd /</p>
<p>pwd</p>
<p>clear</p>
<p>uname -r</p>
<p>最新版的docker3.10以上的</p>
<pre tabindex="0"><code>[root@VM-12-5-centos ~]# cat /etc/os-release
NAME=&#34;CentOS Linux&#34;
VERSION=&#34;7 (Core)&#34;
ID=&#34;centos&#34;
ID_LIKE=&#34;rhel fedora&#34;
VERSION_ID=&#34;7&#34;
PRETTY_NAME=&#34;CentOS Linux 7 (Core)&#34;
ANSI_COLOR=&#34;0;31&#34;
CPE_NAME=&#34;cpe:/o:centos:centos:7&#34;
HOME_URL=&#34;https://www.centos.org/&#34;
BUG_REPORT_URL=&#34;https://bugs.centos.org/&#34;

CENTOS_MANTISBT_PROJECT=&#34;CentOS-7&#34;
CENTOS_MANTISBT_PROJECT_VERSION=&#34;7&#34;
REDHAT_SUPPORT_PRODUCT=&#34;centos&#34;
REDHAT_SUPPORT_PRODUCT_VERSION=&#34;7&#34;
</code></pre><p>系统版本：</p>
<p>帮助文档</p>
<p>卸载旧文档</p>
<pre tabindex="0"><code>#1卸载版本
sudo yum remove docker \
                  docker-client \
                  docker-client-latest \
                  docker-common \
                  docker-latest \
                  docker-latest-logrotate \
                  docker-logrotate \
                  docker-engine
#2、需要的安装包
yum install -y yum-utils

#3、设置镜像仓库
yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo

yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo

#更新yum软件包索引

#4.安装docker
#docker-ce社区版 ee企业版
yum install docker-ce docker-ce-cli containerd.io

#安装指定版本

#启动docker
systemctl start docker

#查看是否安装成功
docker version

#测试hello-world
docker run hello-world
</code></pre><pre tabindex="0"><code class="language-CMD" data-lang="CMD">[root@VM-12-5-centos ~]# docker run hello-world
#首先查找镜像-没有，然后pull拉取镜像
Unable to find image &#39;hello-world:latest&#39; locally
latest: Pulling from library/hello-world
c1ec31eb5944: Pull complete 
Digest: sha256:1408fec50309afee38f3535383f5b09419e6dc0925bc69891e79d84cc4cdcec6
Status: Downloaded newer image for hello-world:latest

#run运行起来了
#这句话就是成功了
Hello from Docker!
This message shows that your installation appears to be working correctly.

To generate this message, Docker took the following steps:
 1. The Docker client contacted the Docker daemon.
 2. The Docker daemon pulled the &#34;hello-world&#34; image from the Docker Hub.
    (amd64)
 3. The Docker daemon created a new container from that image which runs the
    executable that produces the output you are currently reading.
 4. The Docker daemon streamed that output to the Docker client, which sent it
    to your terminal.

To try something more ambitious, you can run an Ubuntu container with:
 $ docker run -it ubuntu bash

Share images, automate workflows, and more with a free Docker ID:
 https://hub.docker.com/

For more examples and ideas, visit:
 https://docs.docker.com/get-started/



#8、查看下载的hello-world镜像
docker images

[root@VM-12-5-centos ~]# docker images
REPOSITORY     TAG          IMAGE ID       CREATED         SIZE
klakegg/hugo   latest-ext   b34dd4f95ea2   14 months ago   1.02GB
hello-world    latest       d2c94e258dcb   15 months ago   13.3kB
</code></pre><p>#卸载docker</p>
<pre tabindex="0"><code class="language-CMD" data-lang="CMD">#1.卸载docker依赖Docker Engine, CLI, containerd, and Docker Compose packages
sudo yum remove docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin docker-ce-rootless-extras
#2.删除资源
rm -rf /var/lib/docker
</code></pre><h3 id="阿里云镜像加速">阿里云镜像加速
</h3><p>容器加速服务  加速服务</p>
<h3 id="回顾hello-world">回顾hello-world
</h3><p>docker run了之后发生了什么？</p>
<p>Docker在本机上寻找镜像——判断本机是否有这个镜像——yes——使用运行这个镜像</p>
<p>——no——Docker上取下载——DockerHub是否可以找到——yes——下载到这个镜像到本地</p>
<p>no——找不到返回错误</p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240803161442427.png"
	
	
	
	loading="lazy"
	
		alt="image-20240803161442427"
	
	
></p>
<h3 id="底层原理">底层原理
</h3><p>Docker是怎么工作的？</p>
<p>Docker 是一个Client-Server结构的系统，Docker的守护进程运行在主机上，通过Socket客户端访问。</p>
<p>DockerServer接收到Docker-Client的指令，就会执行这个命令。</p>
<p>客户端命令-守护进程-产生Dokcer</p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240803162038740.png"
	
	
	
	loading="lazy"
	
		alt="image-20240803162038740"
	
	
></p>
<h3 id="docker为什么比虚拟机快">Docker为什么比虚拟机快？
</h3><p>1.Docker有着比虚拟机更少的抽象层</p>
<p>虚拟机变为了容器，直接在Docker Engine上跑</p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240803162357102.png"
	
	
	
	loading="lazy"
	
		alt="image-20240803162357102"
	
	
></p>
<p>2.docker利用的是宿主机的内核，vm需要是Guest OS</p>
<p>所以新建容器的时候，docker不需要像虚拟机一样重新加载一个操作系统的内核，避免引导。虚拟机是加载Guest OS，分钟级别的，而docker是利用宿主机的操作系统，省略了这个过程，秒级。</p>
<p>NS隔离（容器隔离）</p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240803162713596.png"
	
	
	
	loading="lazy"
	
		alt="image-20240803162713596"
	
	
></p>
<p>现在都支持了。</p>
<p>之后学习完毕后回过头看非常清晰。</p>
<h1 id="docker常用命令">Docker常用命令
</h1><h2 id="帮助命令">帮助命令:
</h2><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmd" data-lang="cmd"><span style="display:flex;"><span>docker version
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>docker info #显示系信息，包括镜像，容器数量
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>docker --help #万能所有命令
</span></span></code></pre></div><p>帮助文档下载地址：</p>
<p><a class="link" href="https://docs.docker.com/reference/"  target="_blank" rel="noopener"
    >Reference documentation | Docker Docs</a></p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240803163242133.png"
	
	
	
	loading="lazy"
	
		alt="image-20240803163242133"
	
	
></p>
<h2 id="镜像命令">镜像命令
</h2><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmd" data-lang="cmd"><span style="display:flex;"><span>docker images 
</span></span><span style="display:flex;"><span>docker images --help
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[root@VM-12-5-centos ~]# docker images
</span></span><span style="display:flex;"><span>REPOSITORY     TAG          IMAGE ID       CREATED         SIZE
</span></span><span style="display:flex;"><span>klakegg/hugo   latest-ext   b34dd4f95ea2   14 months ago   1.02GB
</span></span><span style="display:flex;"><span>hello-world    latest       d2c94e258dcb   15 months ago   13.3kB
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>#解释
</span></span><span style="display:flex;"><span>REPOSITORY 镜像仓库源
</span></span><span style="display:flex;"><span>TAG 镜像的标签
</span></span><span style="display:flex;"><span>IMAGE ID 镜像的ID
</span></span><span style="display:flex;"><span>CREATED 镜像的创建时间
</span></span><span style="display:flex;"><span>SIZE 镜像的大小
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>#可选项
</span></span><span style="display:flex;"><span>-a,--all		#列出所有镜像
</span></span><span style="display:flex;"><span>-q	--quite			#只显示ID
</span></span></code></pre></div><p>官网可以搜索镜像，</p>
<pre tabindex="0"><code class="language-CMD" data-lang="CMD">docker search mysql

#可选项，通过收藏过滤
--filter=stars=3000			#搜索出来的stars大于3000

#下载镜像
docker pull

docker pull --help

docker pull mysql


docker pull mysql[:tag]
#默认latest

#下载的时候：分层下载，docker image的核心 联合文件系统
</code></pre><p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240803232450018.png"
	
	
	
	loading="lazy"
	
		alt="image-20240803232450018"
	
	
></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker pull mysql:5.7
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#下载5.7版本</span>
</span></span></code></pre></div><p>共用了！！只需要更新了，不需要冲突的删除即可。</p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240803232644460.png"
	
	
	
	loading="lazy"
	
		alt="image-20240803232644460"
	
	
></p>
<p>这就是linux的联合文件系统。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmd" data-lang="cmd"><span style="display:flex;"><span>#删除某镜像
</span></span><span style="display:flex;"><span>docker rmi -f 镜像images的id
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>#递归id批量删除-删除全部的
</span></span><span style="display:flex;"><span>docker rmi -f $(docker images -aq)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>#docker images查看所有镜像
</span></span></code></pre></div><p>docker images</p>
<h2 id="容器命令">容器命令
</h2><p>说明：有了镜像才能创建容器。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmd" data-lang="cmd"><span style="display:flex;"><span>#下载一个centos基本镜像系统
</span></span><span style="display:flex;"><span>docker pull centos
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>#run命令的帮助
</span></span><span style="display:flex;"><span>docker run --help
</span></span></code></pre></div><p>新建容器并启动</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmd" data-lang="cmd"><span style="display:flex;"><span>#参数
</span></span><span style="display:flex;"><span>--name=<span style="color:#e6db74">&#34;Name&#34;</span>	#容器名字 tomcat01 tomcat02 用来区分容器
</span></span><span style="display:flex;"><span>-d		#后台
</span></span><span style="display:flex;"><span>-it 	#交互运行 进入容器查看内容
</span></span><span style="display:flex;"><span>-p		#指定容器端口 -p 8080:8080
</span></span><span style="display:flex;"><span>-p ip:主机端口:容器端口
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>-p 主机端口:容器端口
</span></span><span style="display:flex;"><span>-p 容器端口
</span></span><span style="display:flex;"><span>容器端口
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>-p 		随机指定端口
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>docker images	#显示所有镜像
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>#测试，启动并进入容器
</span></span><span style="display:flex;"><span>docker run -it centos /bin/bash
</span></span><span style="display:flex;"><span>linux的控制台一般在/bin下
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>#exit退出，从容器退回主机
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">exit</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>#列出所有正在运行的容器
</span></span><span style="display:flex;"><span>docker ps
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>-a		#列出正在运行、历史运行过的容器
</span></span><span style="display:flex;"><span>-n=?	#显示最近的?个容器
</span></span><span style="display:flex;"><span>-q		#只显示容器的编号
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>#删除镜像
</span></span><span style="display:flex;"><span>docker rm mysql 7ce93a845a8a
</span></span></code></pre></div><h3 id="退出容器">退出容器
</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmd" data-lang="cmd"><span style="display:flex;"><span>#退出
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">exit</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ctrl+p+q #退出容器不停止
</span></span></code></pre></div><p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240804001324303.png"
	
	
	
	loading="lazy"
	
		alt="image-20240804001324303"
	
	
></p>
<p>此时就是没有停止，可以看到ps后查看所有正在运行的镜像，centos还在运行而没有停止。</p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240804001412508.png"
	
	
	
	loading="lazy"
	
		alt="image-20240804001412508"
	
	
></p>
<h3 id="删除容器">删除容器
</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmd" data-lang="cmd"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>docker rm 容器 容器的id
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>docker rm -f $(docker ps -aq)#删除所有容器
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>docker ps -a -qixargs docker rm #删除所有容器
</span></span></code></pre></div><h3 id="启动和停止容器的操作">启动和停止容器的操作
</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmd" data-lang="cmd"><span style="display:flex;"><span>docker start 容器id
</span></span><span style="display:flex;"><span>docker restart 容器id	#重启
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>docker stop	容器id		#停止
</span></span><span style="display:flex;"><span>docker kill 容器id		#强制停止当前命令
</span></span></code></pre></div><p>停止</p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240804001529501.png"
	
	
	
	loading="lazy"
	
		alt="image-20240804001529501"
	
	
></p>
<h2 id="常用的其他命令">常用的其他命令
</h2><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmd" data-lang="cmd"><span style="display:flex;"><span>后台运行
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>#docker run -d 镜像名
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>docker run -d centos
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>#后台运行必须要有前台服务，没有服务就会自杀——易错
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>docker ps 		#查看后发现centos停止了
</span></span></code></pre></div><p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240804001638797.png"
	
	
	
	loading="lazy"
	
		alt="image-20240804001638797"
	
	
></p>
<p>没有前台服务，exit后centos自动停止</p>
<p>需要后台运行</p>
<h3 id="查看日志">查看日志
</h3><pre tabindex="0"><code class="language-CMD" data-lang="CMD">docker logs --help

docker losgs -f -t --tail 容器id			#查看所有日志和时间戳

docker ps 

docker run -it centos /bin/bash

ctrl+p+q		#退出容器不停止
</code></pre><pre tabindex="0"><code class="language-CMD" data-lang="CMD">docker logs -f -t tail 10 容器id  	#最近10条日志
</code></pre><p>发现什么日志也没有，那么</p>
<p>写个shell脚本。记录日志</p>
<p>docker run -d - centos /bin/sh -c &ldquo;while trule;do echo kuangshen;sleep l;done&rdquo;</p>
<p>不停启动，然后循环</p>
<p>#显示日志</p>
<p>docker ps</p>
<p>docker logs -f -t &ndash;tail 10 容器id 		#10条日志</p>
<p>#显示日志</p>
<p>-tf 显示时间戳和log</p>
<p>&ndash;tail number #显示日志的条数</p>
<h3 id="查看容器top">查看容器top
</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmd" data-lang="cmd"><span style="display:flex;"><span>#top命令
</span></span><span style="display:flex;"><span>docker ps 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>docker top 容器id	#
</span></span><span style="display:flex;"><span>UID用户id PID是进程id
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>#!!!!!查看镜像源数据——显示容器的所有信息
</span></span><span style="display:flex;"><span>发现
</span></span><span style="display:flex;"><span>docker inspect --help
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>查看具体的操作
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>docker inspect 容器id 	#查看容器的源数据
</span></span></code></pre></div><h3 id="进入当前正在运行的容器">!!!!进入当前正在运行的容器
</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmd" data-lang="cmd"><span style="display:flex;"><span>#通常容器都是后台运行的，需要进行容器，修改一些配置
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>#-it：交互模式运行
</span></span><span style="display:flex;"><span>docker exec -it 容器id bin/bash
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>#2方式
</span></span><span style="display:flex;"><span>docker attach -it 容器id #是进入正在运行的命令行
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>docker rm -f $(docker ps -aq)		#删除所有
</span></span></code></pre></div><p>docker exec	#进入容器后开启一个新的终端，可以在里面操作（常用）</p>
<p>docker attach	#进入当前容器正在运行的终端，不会启动新的进程！</p>
<p>docker ps</p>
<p>docker images</p>
<p>docker run -it centos /bin/bash</p>
<h4 id="如何将容器内拷主机">如何将容器内拷主机
</h4><pre tabindex="0"><code class="language-CMD" data-lang="CMD">cd /home 

touch kaugnsheng.java

ls

docker ps

docker attach 容器id

cd /home	 #此时在容器内

ls

touch test.java

exit		#虽然容器停止了，但是数据还在



docker ps

docker ps -a

docer cp 容器id:/home/test.java /home		#从容器拷贝到主机

ls
</code></pre><p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240804002933008.png"
	
	
	
	loading="lazy"
	
		alt="image-20240804002933008"
	
	
></p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240804003139883.png"
	
	
	
	loading="lazy"
	
		alt="image-20240804003139883"
	
	
></p>
<h3 id="我的好像exit后容器好像还是在运行的必须要stop">我的好像exit后容器好像还是在运行的必须要stop，
</h3><p>容器如果停止了，也可以拷贝出来。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmd" data-lang="cmd"><span style="display:flex;"><span>#拷贝是一个手动过程，后续可以使用-v 卷的技术，可以实现拷贝的自动的过程——把/home目录打通~
</span></span></code></pre></div><h1 id="小节">小节
</h1><p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240804003327965.png"
	
	
	
	loading="lazy"
	
		alt="image-20240804003327965"
	
	
></p>
<p>-p 和 -q</p>
<p>docker的命令是十分多的，学习的都是最常用的容器和镜像的命令。</p>
<p>登陆上阿里云和dockfile直接生成镜像！</p>
<h1 id="接下来练习">接下来练习
</h1><p>用docker安装nginx</p>
<p>dockerhub上搜索</p>
<p><a class="link" href="https://hub.docker.com/"  target="_blank" rel="noopener"
    >Docker Hub Container Image Library | App Containerization</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmd" data-lang="cmd"><span style="display:flex;"><span>#1搜索镜像
</span></span><span style="display:flex;"><span>#2下载镜像
</span></span><span style="display:flex;"><span>[root@VM-12-5-centos home]# docker pull nginx
</span></span><span style="display:flex;"><span>开放3344端口开放，公网的3344可以访问nginx01的80端口
</span></span><span style="display:flex;"><span>docker run -d --name nginx01 -p 3344:80 nginx
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>#-d 后台
</span></span><span style="display:flex;"><span>#--name 给容器命名
</span></span><span style="display:flex;"><span>#-p 宿主机:容器内端口
</span></span><span style="display:flex;"><span>[root@VM-12-5-centos home]# docker run -d --name nginx01 -p 3344:80 nginx
</span></span><span style="display:flex;"><span>15d98bf175044e55e9e5743165cf1fb1256c67c015ea6b0326dd27320b1b018a
</span></span><span style="display:flex;"><span>[root@VM-12-5-centos home]# docker ps
</span></span><span style="display:flex;"><span>CONTAINER ID   IMAGE                     COMMAND                  CREATED          STATUS          PORTS                                       NAMES
</span></span><span style="display:flex;"><span>15d98bf17504   nginx                     <span style="color:#e6db74">&#34;/docker-entrypoint.…&#34;</span>   26 seconds ago   Up 25 seconds   0.0.0.0:3344-&gt;80/tcp, :::3344-&gt;80/tcp       nginx01
</span></span><span style="display:flex;"><span>39fd379b5760   centos                    <span style="color:#e6db74">&#34;/bin/bash&#34;</span>              18 minutes ago   Up 18 minutes                                               intelligent_lovelace
</span></span><span style="display:flex;"><span>726ca2e767ff   klakegg/hugo:latest-ext   <span style="color:#e6db74">&#34;hugo server&#34;</span>            24 hours ago     Up 24 hours     0.0.0.0:1313-&gt;1313/tcp, :::1313-&gt;1313/tcp   affectionate_golick
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>#本机自测通过了——在宿主机上开启3344端口，相当于映射到了docker上的nginx的80端口
</span></span><span style="display:flex;"><span>[root@VM-12-5-centos home]# curl localhost:3344
</span></span><span style="display:flex;"><span>&lt;!DOCTYPE html&gt;
</span></span><span style="display:flex;"><span>&lt;html&gt;
</span></span><span style="display:flex;"><span>&lt;head&gt;
</span></span><span style="display:flex;"><span>&lt;title&gt;Welcome to nginx!&lt;/title&gt;
</span></span><span style="display:flex;"><span>&lt;style&gt;
</span></span><span style="display:flex;"><span>html { color-scheme: light dark; }
</span></span><span style="display:flex;"><span>body { width: 35em; margin: 0 auto;
</span></span><span style="display:flex;"><span>font-family: Tahoma, Verdana, Arial, sans-serif; }
</span></span><span style="display:flex;"><span>&lt;/style&gt;
</span></span><span style="display:flex;"><span>&lt;/head&gt;
</span></span><span style="display:flex;"><span>&lt;body&gt;
</span></span><span style="display:flex;"><span>&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;
</span></span><span style="display:flex;"><span>&lt;p&gt;If you see this page, the nginx web server is successfully installed and
</span></span><span style="display:flex;"><span>working. Further configuration is required.&lt;/p&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;p&gt;For online documentation and support please refer to
</span></span><span style="display:flex;"><span>&lt;a href=<span style="color:#e6db74">&#34;http://nginx.org/&#34;</span>&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;
</span></span><span style="display:flex;"><span>Commercial support is available at
</span></span><span style="display:flex;"><span>&lt;a href=<span style="color:#e6db74">&#34;http://nginx.com/&#34;</span>&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;
</span></span><span style="display:flex;"><span>&lt;/body&gt;
</span></span><span style="display:flex;"><span>&lt;/html&gt;
</span></span><span style="display:flex;"><span>[root@VM-12-5-centos home]#
</span></span></code></pre></div><p>端口暴露的概念</p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240804004455200.png"
	
	
	
	loading="lazy"
	
		alt="image-20240804004455200"
	
	
></p>
<p>现在在阿里云里就能localhost:3344访问到docker的nginx的80端口了</p>
<p>进入容器操作</p>
<p>docker exec -it nginx01 /bin/bash</p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240804004827648.png"
	
	
	
	loading="lazy"
	
		alt="image-20240804004827648"
	
	
></p>
<p>如果阿里云防火墙安全组开了3344端口，那么外网是可以从：外网ip:3344可以访问到界面的。</p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240804010633449.png"
	
	
	
	loading="lazy"
	
		alt="image-20240804010633449"
	
	
></p>
<p>应该是可以的，我的nginx的配置应该有问题。</p>
<p>思考：思考问题：我们每次改动gx配置文件，都需要进入容器内部？十分的麻烦，我要是可以在容器外部提供一个映射路径，达到在容器修改文件名，容器内部就可以自动修改？-v 数据卷！</p>
<h1 id="作业2">作业2
</h1><p>使用docker装tomcat</p>
<h1 id="作业3部署eselastickibana">作业3部署es(elastic)+kibana
</h1><pre tabindex="0"><code>#eS暴露的端口多
#es十分耗内存
</code></pre><h1 id="可视化面板">可视化面板
</h1><ul>
<li>portainer（先用这个）</li>
<li>rancher（ci/cd）再用</li>
</ul>
<p>图形化界面管理工具,提供一个后台面板供我们操作。</p>
<p>外网8088端口</p>
<h5 id="开放外网端口"><strong>开放外网端口</strong>
</h5><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmd" data-lang="cmd"><span style="display:flex;"><span>docker run -d -p 8088:9000\
</span></span><span style="display:flex;"><span>--restart=always -v /var/run/docker.sock:/var/run/docker.sock --privileged=true portainer/portainer
</span></span></code></pre></div><p>安装后外网的8088端口、设置阿里云安全组，然后即可访问ui界面，看得到多少个镜像、容器在运行和端口映射关系。</p>
<p>或者在curl localhost:8088然后在服务器中访问也可以。</p>
<p>可视化面板。</p>
<p>所有的应用，直接打包部署。</p>
<p>如何得到镜像：</p>
<ul>
<li>远程仓库下载</li>
<li>朋友拷贝给你</li>
<li>自己制作镜像</li>
</ul>
<h1 id="理解分层管理">理解分层管理
</h1><h2 id="联合文件系统unionfs">联合文件系统UnionFS
</h2><p>支持对文件系统的修改作为一次提交来一层层叠加。</p>
<p>tomcat和mysql都要用到某个linux内核，那么就只会新增。</p>
<p>层的概念，image+images</p>
<p>docker的镜像实际上是由一层层的文件系统组成的，这种层级的文件系统UnionFS</p>
<h5 id="黑屏---开机的过程中没有了那么这段时间都是公用的">黑屏&mdash;开机的过程中没有了，那么这段时间都是公用的。
</h5><p>bootfs(boot file system)。没了</p>
<p>精简的内核OS例如centos很小.</p>
<h2 id="分层">分层
</h2><p>docker pull redis</p>
<p>这一层已经存在了</p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240804012426580.png"
	
	
	
	loading="lazy"
	
		alt="image-20240804012426580"
	
	
></p>
<p>docker image inspect redis:laest</p>
<p>查看信息</p>
<p>里面layers</p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240804012513441.png"
	
	
	
	loading="lazy"
	
		alt="image-20240804012513441"
	
	
></p>
<p>在layer记录</p>
<p>打包的时候会有6个文件</p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240804012617221.png"
	
	
	
	loading="lazy"
	
		alt="image-20240804012617221"
	
	
></p>
<p>文件能实现替换，也能文件复用。</p>
<p>redis的联合文件系统的表示</p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240804012800417.png"
	
	
	
	loading="lazy"
	
		alt="image-20240804012800417"
	
	
></p>
<p>在layer中也是6个</p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240804012843459.png"
	
	
	
	loading="lazy"
	
		alt="image-20240804012843459"
	
	
></p>
<p>所以docker是分层下载的。</p>
<h1 id="特点">特点
</h1><p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240804012936913.png"
	
	
	
	loading="lazy"
	
		alt="image-20240804012936913"
	
	
></p>
<p>run起来的东西可以修改，而镜像是无法修改的。</p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240804013113830.png"
	
	
	
	loading="lazy"
	
		alt="image-20240804013113830"
	
	
></p>
<p>如何提交自己的镜像</p>
<h1 id="如何commit镜像">如何commit镜像
</h1><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker commit 提交容器成为一个新的副本
</span></span><span style="display:flex;"><span><span style="color:#75715e">#命令和git原理类似</span>
</span></span><span style="display:flex;"><span>docker commit -m <span style="color:#e6db74">&#34;提交描述的消息&#34;</span> -a<span style="color:#e6db74">&#34;作者&#34;</span>
</span></span></code></pre></div><p>举例：将tomcat的docker的webapps的内文件拷贝打牌webapps中，制作一个webapps中有文件的镜像</p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240805153529893.png"
	
	
	
	loading="lazy"
	
		alt="image-20240805153529893"
	
	
></p>
<p>docker images</p>
<p>docker run -it -p 8080:8080 tomcat		#启动docker-tomcat</p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240805153051556.png"
	
	
	
	loading="lazy"
	
		alt="image-20240805153051556"
	
	
></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SHELL" data-lang="SHELL"><span style="display:flex;"><span><span style="color:#75715e">#1.启动了tomcat的前台</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>docker ps 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>docker exec -it 容器id /bin/bash			<span style="color:#75715e">#进入了tomcat控制台</span>
</span></span></code></pre></div><p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240805153151667.png"
	
	
	
	loading="lazy"
	
		alt="image-20240805153151667"
	
	
></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SHELL" data-lang="SHELL"><span style="display:flex;"><span>cd webapps
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ls
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>cd..
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ls
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>cp -r webapps.dist/* webapps
</span></span></code></pre></div><p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240805153228619.png"
	
	
	
	loading="lazy"
	
		alt="image-20240805153228619"
	
	
></p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240805153352187.png"
	
	
	
	loading="lazy"
	
		alt="image-20240805153352187"
	
	
></p>
<p>发布</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>root@7803ab322d1d:/usr/local/tomcat/webapps# ls
</span></span><span style="display:flex;"><span>docs  examples  host-manager  manager  ROOT
</span></span><span style="display:flex;"><span>root@7803ab322d1d:/usr/local/tomcat/webapps# exit
</span></span><span style="display:flex;"><span>exit
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos ~<span style="color:#f92672">]</span><span style="color:#75715e"># docker ps</span>
</span></span><span style="display:flex;"><span>CONTAINER ID   IMAGE                     COMMAND                  CREATED          STATUS          PORTS                                                 NAMES
</span></span><span style="display:flex;"><span>7803ab322d1d   tomcat                    <span style="color:#e6db74">&#34;catalina.sh run&#34;</span>        <span style="color:#ae81ff">10</span> minutes ago   Up <span style="color:#ae81ff">10</span> minutes   8080/tcp, 0.0.0.0:8081-&gt;8081/tcp, :::8081-&gt;8081/tcp   cranky_payne
</span></span><span style="display:flex;"><span>15d98bf17504   nginx                     <span style="color:#e6db74">&#34;/docker-entrypoint.…&#34;</span>   <span style="color:#ae81ff">39</span> hours ago     Up <span style="color:#ae81ff">39</span> hours     0.0.0.0:3344-&gt;80/tcp, :::3344-&gt;80/tcp                 nginx01
</span></span><span style="display:flex;"><span>39fd379b5760   centos                    <span style="color:#e6db74">&#34;/bin/bash&#34;</span>              <span style="color:#ae81ff">39</span> hours ago     Up <span style="color:#ae81ff">39</span> hours                                                           intelligent_lovelace
</span></span><span style="display:flex;"><span>726ca2e767ff   klakegg/hugo:latest-ext   <span style="color:#e6db74">&#34;hugo server&#34;</span>            <span style="color:#ae81ff">2</span> days ago       Up <span style="color:#ae81ff">2</span> days       0.0.0.0:1313-&gt;1313/tcp, :::1313-&gt;1313/tcp             affectionate_golick
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#4.将我们操作过的容器通过commit提交为一个新的镜像</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos ~<span style="color:#f92672">]</span><span style="color:#75715e"># docker commit -a=&#34;kuangsheng&#34; -m=&#34;add webapps applalala&#34; 7803ab322d1d tomcat02:1.0</span>
</span></span><span style="display:flex;"><span>sha256:73725f496f3b9c35005b2089ec45f577ed62958d9bf00ca0c3b91455bc683e34
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos ~<span style="color:#f92672">]</span><span style="color:#75715e"># docker images</span>
</span></span><span style="display:flex;"><span>REPOSITORY     TAG          IMAGE ID       CREATED          SIZE
</span></span><span style="display:flex;"><span>tomcat02       1.0          73725f496f3b   <span style="color:#ae81ff">11</span> seconds ago   466MB
</span></span><span style="display:flex;"><span>tomcat         latest       2a60d35653ea   <span style="color:#ae81ff">10</span> days ago      461MB
</span></span><span style="display:flex;"><span>nginx          latest       a72860cb95fd   <span style="color:#ae81ff">6</span> weeks ago      188MB
</span></span><span style="display:flex;"><span>klakegg/hugo   latest-ext   b34dd4f95ea2   <span style="color:#ae81ff">14</span> months ago    1.02GB
</span></span><span style="display:flex;"><span>hello-world    latest       d2c94e258dcb   <span style="color:#ae81ff">15</span> months ago    13.3kB
</span></span><span style="display:flex;"><span>centos         latest       5d0da3dc9764   <span style="color:#ae81ff">2</span> years ago      231MB
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos ~<span style="color:#f92672">]</span><span style="color:#75715e"># </span>
</span></span></code></pre></div><p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240805153835686.png"
	
	
	
	loading="lazy"
	
		alt="image-20240805153835686"
	
	
></p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240805154014112.png"
	
	
	
	loading="lazy"
	
		alt="image-20240805154014112"
	
	
></p>
<p>类比学习VM的快照。</p>
<h3 id="弱小和无知不是生存的障碍傲慢才是">弱小和无知不是生存的障碍，傲慢才是。
</h3><h1 id="容器数据卷">容器数据卷
</h1><h2 id="什么是容器数据卷">什么是容器数据卷？
</h2><p>docker的理念回顾，应用和环境打包为一个镜像！</p>
<p>数据？如果数据在容器中，那么将容器删除，数据就会丢失！<strong>需求：数据可以持久化</strong></p>
<p>MySQL，容器删了，删除跑路！<strong>需求：MySQL数据可以存储在本地</strong></p>
<p>卷技术就是这样！</p>
<p>目录的挂在，将容器内的目录挂载到Linux上面！</p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240805154732926.png"
	
	
	
	loading="lazy"
	
		alt="image-20240805154732926"
	
	
></p>
<h3 id="总结容器的持久化和同步操作容器间也是可以数据共享的">总结：容器的持久化和同步操作容器间也是可以数据共享的！
</h3><h2 id="使用数据卷">使用数据卷
</h2><ul>
<li>方法一、直接使用命令来挂载 -v</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SHELL" data-lang="SHELL"><span style="display:flex;"><span>docker run -it -v 主机目录:容器目录
</span></span><span style="display:flex;"><span><span style="color:#75715e">#测试</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos home<span style="color:#f92672">]</span><span style="color:#75715e"># docker run -it -v /home/ceshi:/home centos /bin/bash</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#可以看到宿主机有了/ceshi目录</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos ~<span style="color:#f92672">]</span><span style="color:#75715e"># cd home</span>
</span></span><span style="display:flex;"><span>-bash: cd: home: No such file or directory
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos ~<span style="color:#f92672">]</span><span style="color:#75715e"># cd /home</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos home<span style="color:#f92672">]</span><span style="color:#75715e"># ls</span>
</span></span><span style="display:flex;"><span>ceshi  git  git_1  kaungsheng.java  lighthouse  PoolBee  www
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos home<span style="color:#f92672">]</span><span style="color:#75715e"># </span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#centos的容器的/home目录</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos ~<span style="color:#f92672">]</span><span style="color:#75715e"># cd /homge</span>
</span></span><span style="display:flex;"><span>-bash: cd: /homge: No such file or directory
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos ~<span style="color:#f92672">]</span><span style="color:#75715e"># cd /home</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos home<span style="color:#f92672">]</span><span style="color:#75715e"># ls</span>
</span></span><span style="display:flex;"><span>git  git_1  kaungsheng.java  lighthouse  PoolBee  www
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos home<span style="color:#f92672">]</span><span style="color:#75715e"># docker run -it -v /home/ceshi:/home centos /bin/bash</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@783df7f8b77c /<span style="color:#f92672">]</span><span style="color:#75715e"># cd /home</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@783df7f8b77c home<span style="color:#f92672">]</span><span style="color:#75715e"># ls </span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@783df7f8b77c home<span style="color:#f92672">]</span><span style="color:#75715e"># </span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#以后外部放的文件以后就会和docker的cenos的/home目录同步</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#查看centos的容器的信息</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos home<span style="color:#f92672">]</span><span style="color:#75715e"># docker inspect 783df7f8b77c</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#Mount中</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;Mounts&#34;</span>: <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;Type&#34;</span>: <span style="color:#e6db74">&#34;bind&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;Source&#34;</span>: <span style="color:#e6db74">&#34;/home/ceshi&#34;</span>,#主机内地址
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;Destination&#34;</span>: <span style="color:#e6db74">&#34;/home&#34;</span>,#docker容器内地址
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;Mode&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;RW&#34;</span>: true,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;Propagation&#34;</span>: <span style="color:#e6db74">&#34;rprivate&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">]</span>,
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span><span style="color:#75715e">#测试</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#可以看到主机中是空的</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos home<span style="color:#f92672">]</span><span style="color:#75715e"># cd ceshi</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos ceshi<span style="color:#f92672">]</span><span style="color:#75715e"># ls</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos ceshi<span style="color:#f92672">]</span><span style="color:#75715e"># </span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#在容器中创建test.java</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@783df7f8b77c home<span style="color:#f92672">]</span><span style="color:#75715e"># touch test.java</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@783df7f8b77c home<span style="color:#f92672">]</span><span style="color:#75715e"># </span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#后续在主机中查看到传过来了！</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos ceshi<span style="color:#f92672">]</span><span style="color:#75715e"># ls</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos ceshi<span style="color:#f92672">]</span><span style="color:#75715e"># ls</span>
</span></span><span style="display:flex;"><span>test.java
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos ceshi<span style="color:#f92672">]</span><span style="color:#75715e"># </span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>同步的过程
</span></span></code></pre></div><p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240805160033812.png"
	
	
	
	loading="lazy"
	
		alt="image-20240805160033812"
	
	
></p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240805155608500.png"
	
	
	
	loading="lazy"
	
		alt="image-20240805155608500"
	
	
></p>
<h4 id="如果容器停止但是在linux的文件夹更改还是会同步到容器内绑定的文件夹">如果容器停止，但是在Linux的文件夹更改，还是会同步到容器内绑定的文件夹！
</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SHELL" data-lang="SHELL"><span style="display:flex;"><span><span style="color:#75715e">#如果容器停止，但是在Linux的文件夹更改，还是会同步到容器内绑定的文件夹！</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#1.让容器停止</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos home<span style="color:#f92672">]</span><span style="color:#75715e"># docker ps</span>
</span></span><span style="display:flex;"><span>CONTAINER ID   IMAGE                     COMMAND                  CREATED        STATUS        PORTS                                       NAMES
</span></span><span style="display:flex;"><span>15d98bf17504   nginx                     <span style="color:#e6db74">&#34;/docker-entrypoint.…&#34;</span>   <span style="color:#ae81ff">39</span> hours ago   Up <span style="color:#ae81ff">39</span> hours   0.0.0.0:3344-&gt;80/tcp, :::3344-&gt;80/tcp       nginx01
</span></span><span style="display:flex;"><span>39fd379b5760   centos                    <span style="color:#e6db74">&#34;/bin/bash&#34;</span>              <span style="color:#ae81ff">40</span> hours ago   Up <span style="color:#ae81ff">40</span> hours                                               intelligent_lovelace
</span></span><span style="display:flex;"><span>726ca2e767ff   klakegg/hugo:latest-ext   <span style="color:#e6db74">&#34;hugo server&#34;</span>            <span style="color:#ae81ff">2</span> days ago     Up <span style="color:#ae81ff">2</span> days     0.0.0.0:1313-&gt;1313/tcp, :::1313-&gt;1313/tcp   affectionate_golick
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos home<span style="color:#f92672">]</span><span style="color:#75715e"># stop 39fd379b5760</span>
</span></span><span style="display:flex;"><span>bash: stop: command not found...
</span></span><span style="display:flex;"><span>Similar command is: <span style="color:#e6db74">&#39;top&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos home<span style="color:#f92672">]</span><span style="color:#75715e"># docker stop 39fd379b5760</span>
</span></span><span style="display:flex;"><span>39fd379b5760
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos home<span style="color:#f92672">]</span><span style="color:#75715e"># docker ps</span>
</span></span><span style="display:flex;"><span>CONTAINER ID   IMAGE                     COMMAND                  CREATED        STATUS        PORTS                                       NAMES
</span></span><span style="display:flex;"><span>15d98bf17504   nginx                     <span style="color:#e6db74">&#34;/docker-entrypoint.…&#34;</span>   <span style="color:#ae81ff">39</span> hours ago   Up <span style="color:#ae81ff">39</span> hours   0.0.0.0:3344-&gt;80/tcp, :::3344-&gt;80/tcp       nginx01
</span></span><span style="display:flex;"><span>726ca2e767ff   klakegg/hugo:latest-ext   <span style="color:#e6db74">&#34;hugo server&#34;</span>            <span style="color:#ae81ff">2</span> days ago     Up <span style="color:#ae81ff">2</span> days     0.0.0.0:1313-&gt;1313/tcp, :::1313-&gt;1313/tcp   affectionate_golick
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos home<span style="color:#f92672">]</span><span style="color:#75715e"># </span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#修改宿主机中的文件</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#启动容器进行查看</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos home<span style="color:#f92672">]</span><span style="color:#75715e"># docker ps -a</span>
</span></span><span style="display:flex;"><span>CONTAINER ID   IMAGE                     COMMAND                  CREATED          STATUS                        PORTS                                       NAMES
</span></span><span style="display:flex;"><span>09b5fac024a8   5d0da3dc9764              <span style="color:#e6db74">&#34;/bin/bash&#34;</span>              <span style="color:#ae81ff">2</span> minutes ago    Exited <span style="color:#f92672">(</span>0<span style="color:#f92672">)</span> <span style="color:#ae81ff">2</span> minutes ago                                                  objective_noyce
</span></span><span style="display:flex;"><span>783df7f8b77c   centos                    <span style="color:#e6db74">&#34;/bin/bash&#34;</span>              <span style="color:#ae81ff">19</span> minutes ago   Exited <span style="color:#f92672">(</span>0<span style="color:#f92672">)</span> <span style="color:#ae81ff">10</span> minutes ago                                                 affectionate_shaw
</span></span><span style="display:flex;"><span>7803ab322d1d   tomcat                    <span style="color:#e6db74">&#34;catalina.sh run&#34;</span>        <span style="color:#ae81ff">46</span> minutes ago   Exited <span style="color:#f92672">(</span>130<span style="color:#f92672">)</span> <span style="color:#ae81ff">22</span> minutes ago                                               cranky_payne
</span></span><span style="display:flex;"><span>15d98bf17504   nginx                     <span style="color:#e6db74">&#34;/docker-entrypoint.…&#34;</span>   <span style="color:#ae81ff">40</span> hours ago     Up <span style="color:#ae81ff">40</span> hours                   0.0.0.0:3344-&gt;80/tcp, :::3344-&gt;80/tcp       nginx01
</span></span><span style="display:flex;"><span>a17f2df4b0c2   centos                    <span style="color:#e6db74">&#34;/bin/bash&#34;</span>              <span style="color:#ae81ff">40</span> hours ago     Exited <span style="color:#f92672">(</span>127<span style="color:#f92672">)</span> <span style="color:#ae81ff">40</span> hours ago                                                 eloquent_northcutt
</span></span><span style="display:flex;"><span>223a694af194   centos                    <span style="color:#e6db74">&#34;/bin/bash&#34;</span>              <span style="color:#ae81ff">40</span> hours ago     Exited <span style="color:#f92672">(</span>0<span style="color:#f92672">)</span> <span style="color:#ae81ff">40</span> hours ago                                                   magical_volhard
</span></span><span style="display:flex;"><span>39fd379b5760   centos                    <span style="color:#e6db74">&#34;/bin/bash&#34;</span>              <span style="color:#ae81ff">40</span> hours ago     Exited <span style="color:#f92672">(</span>127<span style="color:#f92672">)</span> <span style="color:#ae81ff">4</span> minutes ago                                                intelligent_lovelace
</span></span><span style="display:flex;"><span>28e3e9b4ecdf   centos                    <span style="color:#e6db74">&#34;/bin/bash&#34;</span>              <span style="color:#ae81ff">40</span> hours ago     Exited <span style="color:#f92672">(</span>0<span style="color:#f92672">)</span> <span style="color:#ae81ff">40</span> hours ago                                                   unruffled_sinoussi
</span></span><span style="display:flex;"><span>f75f0b03f939   centos                    <span style="color:#e6db74">&#34;/bin/bash&#34;</span>              <span style="color:#ae81ff">40</span> hours ago     Exited <span style="color:#f92672">(</span>0<span style="color:#f92672">)</span> <span style="color:#ae81ff">40</span> hours ago                                                   vigilant_euclid
</span></span><span style="display:flex;"><span>aa158bb7f0e1   centos                    <span style="color:#e6db74">&#34;/bin/bash&#34;</span>              <span style="color:#ae81ff">40</span> hours ago     Exited <span style="color:#f92672">(</span>0<span style="color:#f92672">)</span> <span style="color:#ae81ff">40</span> hours ago                                                   elated_robinson
</span></span><span style="display:flex;"><span>d6dfa990d314   centos                    <span style="color:#e6db74">&#34;/bin/bash&#34;</span>              <span style="color:#ae81ff">40</span> hours ago     Exited <span style="color:#f92672">(</span>127<span style="color:#f92672">)</span> <span style="color:#ae81ff">40</span> hours ago                                                 nervous_montalcini
</span></span><span style="display:flex;"><span>9101ac141b0f   centos                    <span style="color:#e6db74">&#34;/bin/bash&#34;</span>              <span style="color:#ae81ff">40</span> hours ago     Exited <span style="color:#f92672">(</span>127<span style="color:#f92672">)</span> <span style="color:#ae81ff">40</span> hours ago                                                 competent_mcnulty
</span></span><span style="display:flex;"><span>02cd07c4283d   centos                    <span style="color:#e6db74">&#34;/bin/basj&#34;</span>              <span style="color:#ae81ff">40</span> hours ago     Created                                                                   upbeat_driscoll
</span></span><span style="display:flex;"><span>9b872200a3b3   centos                    <span style="color:#e6db74">&#34;/bin/bash&#34;</span>              <span style="color:#ae81ff">40</span> hours ago     Exited <span style="color:#f92672">(</span>0<span style="color:#f92672">)</span> <span style="color:#ae81ff">40</span> hours ago                                                   stoic_kepler
</span></span><span style="display:flex;"><span>8512fca58a26   centos                    <span style="color:#e6db74">&#34;/bin/basj&#34;</span>              <span style="color:#ae81ff">40</span> hours ago     Created                                                                   hungry_sutherland
</span></span><span style="display:flex;"><span>7fd5a54afd95   hello-world               <span style="color:#e6db74">&#34;/hello&#34;</span>                 <span style="color:#ae81ff">2</span> days ago       Exited <span style="color:#f92672">(</span>0<span style="color:#f92672">)</span> <span style="color:#ae81ff">2</span> days ago                                                     cool_turing
</span></span><span style="display:flex;"><span>726ca2e767ff   klakegg/hugo:latest-ext   <span style="color:#e6db74">&#34;hugo server&#34;</span>            <span style="color:#ae81ff">2</span> days ago       Up <span style="color:#ae81ff">2</span> days                     0.0.0.0:1313-&gt;1313/tcp, :::1313-&gt;1313/tcp   affectionate_golick
</span></span><span style="display:flex;"><span>59e514225874   klakegg/hugo:latest-ext   <span style="color:#e6db74">&#34;hugo&#34;</span>                   <span style="color:#ae81ff">2</span> days ago       Exited <span style="color:#f92672">(</span>255<span style="color:#f92672">)</span> <span style="color:#ae81ff">2</span> days ago                                                   confident_bassi
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos home<span style="color:#f92672">]</span><span style="color:#75715e"># docker start 783df7f8b77c</span>
</span></span><span style="display:flex;"><span>783df7f8b77c
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos home<span style="color:#f92672">]</span><span style="color:#75715e"># docker attach 783df7f8b77c</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@783df7f8b77c /<span style="color:#f92672">]</span><span style="color:#75715e"># cd /home</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@783df7f8b77c home<span style="color:#f92672">]</span><span style="color:#75715e"># ls</span>
</span></span><span style="display:flex;"><span>test.java
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@783df7f8b77c home<span style="color:#f92672">]</span><span style="color:#75715e"># cat test/java</span>
</span></span><span style="display:flex;"><span>cat: test/java: No such file or directory
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@783df7f8b77c home<span style="color:#f92672">]</span><span style="color:#75715e"># cat test.java</span>
</span></span><span style="display:flex;"><span>hello linux update
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@783df7f8b77c home<span style="color:#f92672">]</span><span style="color:#75715e"># </span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#可以看到成功了！</span>
</span></span></code></pre></div><p>好处：以后在本地修改，容器中会自动同步。</p>
<h3 id="实战安装mysql">实战：安装MySQL
</h3><p>思考：MySQL的数据持久化问题！</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SHELL" data-lang="SHELL"><span style="display:flex;"><span><span style="color:#75715e">#下载mysql</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#docker search mysql</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#进官网看版本</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#docker pull mysql:5.7</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos home<span style="color:#f92672">]</span><span style="color:#75715e"># docker pull mysql:5.7</span>
</span></span><span style="display:flex;"><span>5.7: Pulling from library/mysql
</span></span><span style="display:flex;"><span>20e4dcae4c69: Downloading <span style="color:#f92672">[=============</span>&gt;                                     <span style="color:#f92672">]</span>  13.71MB/50.5MB
</span></span><span style="display:flex;"><span>1c56c3d4ce74: Download complete 
</span></span><span style="display:flex;"><span>e9f03a1c24ce: Download complete 
</span></span><span style="display:flex;"><span>68c3898c2015: Download complete 
</span></span><span style="display:flex;"><span>6b95a940e7b6: Download complete 
</span></span><span style="display:flex;"><span>90986bb8de6e: Download complete 
</span></span><span style="display:flex;"><span>ae71319cb779: Waiting 
</span></span><span style="display:flex;"><span>ffc89e9dfd88: Download complete 
</span></span><span style="display:flex;"><span>43d05e938198: Waiting 
</span></span><span style="display:flex;"><span>064b2d298fba: Waiting 
</span></span><span style="display:flex;"><span>df9a4d85569b: Waiting 
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos home<span style="color:#f92672">]</span><span style="color:#75715e"># docker images</span>
</span></span><span style="display:flex;"><span>REPOSITORY     TAG          IMAGE ID       CREATED          SIZE
</span></span><span style="display:flex;"><span>tomcat02       1.0          73725f496f3b   <span style="color:#ae81ff">49</span> minutes ago   466MB
</span></span><span style="display:flex;"><span>tomcat         latest       2a60d35653ea   <span style="color:#ae81ff">10</span> days ago      461MB
</span></span><span style="display:flex;"><span>nginx          latest       a72860cb95fd   <span style="color:#ae81ff">6</span> weeks ago      188MB
</span></span><span style="display:flex;"><span>mysql          5.7          5107333e08a8   <span style="color:#ae81ff">7</span> months ago     501MB
</span></span><span style="display:flex;"><span>klakegg/hugo   latest-ext   b34dd4f95ea2   <span style="color:#ae81ff">14</span> months ago    1.02GB
</span></span><span style="display:flex;"><span>hello-world    latest       d2c94e258dcb   <span style="color:#ae81ff">15</span> months ago    13.3kB
</span></span><span style="display:flex;"><span>centos         latest       5d0da3dc9764   <span style="color:#ae81ff">2</span> years ago      231MB
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos home<span style="color:#f92672">]</span><span style="color:#75715e"># </span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#运行容器进行数据挂载</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#安装启动mysql，要配置【用户密码】</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#去docker hub找mysql</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos home<span style="color:#f92672">]</span><span style="color:#75715e"># docker images</span>
</span></span><span style="display:flex;"><span>REPOSITORY     TAG          IMAGE ID       CREATED          SIZE
</span></span><span style="display:flex;"><span>tomcat02       1.0          73725f496f3b   <span style="color:#ae81ff">49</span> minutes ago   466MB
</span></span><span style="display:flex;"><span>tomcat         latest       2a60d35653ea   <span style="color:#ae81ff">10</span> days ago      461MB
</span></span><span style="display:flex;"><span>nginx          latest       a72860cb95fd   <span style="color:#ae81ff">6</span> weeks ago      188MB
</span></span><span style="display:flex;"><span>mysql          5.7          5107333e08a8   <span style="color:#ae81ff">7</span> months ago     501MB
</span></span><span style="display:flex;"><span>klakegg/hugo   latest-ext   b34dd4f95ea2   <span style="color:#ae81ff">14</span> months ago    1.02GB
</span></span><span style="display:flex;"><span>hello-world    latest       d2c94e258dcb   <span style="color:#ae81ff">15</span> months ago    13.3kB
</span></span><span style="display:flex;"><span>centos         latest       5d0da3dc9764   <span style="color:#ae81ff">2</span> years ago      231MB
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos home<span style="color:#f92672">]</span><span style="color:#75715e"># docker run -d -p 3310:3306 -v /home/mysql/conf:/etc/mysql/conf.d -v /home/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 --name mysql01 mysql:5.7</span>
</span></span><span style="display:flex;"><span>4d55165721b1195ccfb240b39dcf2f5cb9d8edd50095305d4197ae55391fbf5b
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos home<span style="color:#f92672">]</span><span style="color:#75715e"># </span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#启动我们的mysql</span>
</span></span><span style="display:flex;"><span>-d 后台运行
</span></span><span style="display:flex;"><span>-p 端口映射
</span></span><span style="display:flex;"><span>-v 卷挂载
</span></span><span style="display:flex;"><span>-e 环境配置
</span></span><span style="display:flex;"><span>--name 容器名字
</span></span></code></pre></div><p><a class="link" href="https://hub.docker.com/_/mysql"  target="_blank" rel="noopener"
    >mysql - Official Image | Docker Hub</a></p>
<p>官网中</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span>$ docker run --name some-mysql -e MYSQL_ROOT_PASSWORD<span style="color:#f92672">=</span>my-secret-pw -d mysql:tag
</span></span></code></pre></div><p>-e MYSQL_ROOT_PASSWORD=123456 &ndash;name mysql01 mysql:5.7</p>
<p>-e 就是配置环境，那么这里就是设置密码</p>
<h1 id="新建mysql连接">新建Mysql连接
</h1><p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240805164131422.png"
	
	
	
	loading="lazy"
	
		alt="image-20240805164131422"
	
	
></p>
<h4 id="阿里云安全组本地防火墙都看了吗这是最基本的">阿里云安全组，本地防火墙都看了吗，这是最基本的
</h4><p>且要保证这个是有程序占用的！</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SHELL" data-lang="SHELL"><span style="display:flex;"><span><span style="color:#75715e">#云服务器LinuxCentos上打开3306,命令行打开或图形化界面打开</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#腾讯云安全组设置，本机windows设置防火墙设置出站规则</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos home<span style="color:#f92672">]</span><span style="color:#75715e"># firewall-cmd --permanent --add-port=3306/tcp</span>
</span></span><span style="display:flex;"><span>success
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos home<span style="color:#f92672">]</span><span style="color:#75715e"># firewall-cmd --reload</span>
</span></span><span style="display:flex;"><span>success
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos home<span style="color:#f92672">]</span><span style="color:#75715e"># </span>
</span></span></code></pre></div><p>宝塔面板中可以看到状态，而腾讯云的看不到</p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240805173115153.png"
	
	
	
	loading="lazy"
	
		alt="image-20240805173115153"
	
	
></p>
<p>重启服务器然后在宝塔中查看状态不行。</p>
<h5 id="已经下载了mysql57镜像然后又删除了原本的mysql01容器然后重新根据景象创建成功了">已经下载了mysql5.7镜像，然后又删除了原本的mysql01容器，然后重新根据景象创建，成功了！
</h5><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SHELL" data-lang="SHELL"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos ~<span style="color:#f92672">]</span><span style="color:#75715e"># docker images</span>
</span></span><span style="display:flex;"><span>REPOSITORY     TAG          IMAGE ID       CREATED         SIZE
</span></span><span style="display:flex;"><span>tomcat02       1.0          73725f496f3b   <span style="color:#ae81ff">2</span> hours ago     466MB
</span></span><span style="display:flex;"><span>tomcat         latest       2a60d35653ea   <span style="color:#ae81ff">10</span> days ago     461MB
</span></span><span style="display:flex;"><span>nginx          latest       a72860cb95fd   <span style="color:#ae81ff">6</span> weeks ago     188MB
</span></span><span style="display:flex;"><span>mysql          5.7          5107333e08a8   <span style="color:#ae81ff">7</span> months ago    501MB
</span></span><span style="display:flex;"><span>klakegg/hugo   latest-ext   b34dd4f95ea2   <span style="color:#ae81ff">14</span> months ago   1.02GB
</span></span><span style="display:flex;"><span>hello-world    latest       d2c94e258dcb   <span style="color:#ae81ff">15</span> months ago   13.3kB
</span></span><span style="display:flex;"><span>centos         latest       5d0da3dc9764   <span style="color:#ae81ff">2</span> years ago     231MB
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos ~<span style="color:#f92672">]</span><span style="color:#75715e"># docker run -d -p 3310:3306 -v /home/mysql/conf:/etc/mysql/conf.d -v /home/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 --name mysql01 mysql:5.7</span>
</span></span><span style="display:flex;"><span>docker: Error response from daemon: Conflict. The container name <span style="color:#e6db74">&#34;/mysql01&#34;</span> is already in use by container <span style="color:#e6db74">&#34;4d55165721b1195ccfb240b39dcf2f5cb9d8edd50095305d4197ae55391fbf5b&#34;</span>. You have to remove <span style="color:#f92672">(</span>or rename<span style="color:#f92672">)</span> that container to be able to reuse that name.
</span></span><span style="display:flex;"><span>See <span style="color:#e6db74">&#39;docker run --help&#39;</span>.
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos ~<span style="color:#f92672">]</span><span style="color:#75715e"># stop mysql01</span>
</span></span><span style="display:flex;"><span>bash: stop: command not found...
</span></span><span style="display:flex;"><span>Similar command is: <span style="color:#e6db74">&#39;top&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos ~<span style="color:#f92672">]</span><span style="color:#75715e"># docker stop mysql01</span>
</span></span><span style="display:flex;"><span>mysql01
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos ~<span style="color:#f92672">]</span><span style="color:#75715e"># </span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos ~<span style="color:#f92672">]</span><span style="color:#75715e"># docker rm mysql01</span>
</span></span><span style="display:flex;"><span>mysql01
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#两个容器数据卷进行挂载</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># -v /home/mysql/conf:/etc/mysql/conf.d -v /home/mysql/data:/var/lib/mysql </span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#1.宿主机/home/mysql/conf---&gt;docker的/etc/mysql/conf.d    mysql的配置文件</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#2.宿主机/home/mysql/data---&gt;docker的/var/lib/mysql 	mysql的数据文件</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos ~<span style="color:#f92672">]</span><span style="color:#75715e"># docker run -d -p 3310:3306 -v /home/mysql/conf:/etc/mysql/conf.d -v /home/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 --name mysql01 mysql:5.7</span>
</span></span><span style="display:flex;"><span>f669f7ef2710692ff207cd5b8889e77289d3631e5419e494ad056fd0e405f504
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos ~<span style="color:#f92672">]</span><span style="color:#75715e"># </span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e">#启动成功后本地是有sqlyog来测试</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#sqlyog--连接到服务器的3310--3310和容器中的3306映射，这个时候可以连接上了</span>
</span></span></code></pre></div><p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240805174223678.png"
	
	
	
	loading="lazy"
	
		alt="image-20240805174223678"
	
	
></p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240805174221909.png"
	
	
	
	loading="lazy"
	
		alt="image-20240805174221909"
	
	
></p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240805174513403.png"
	
	
	
	loading="lazy"
	
		alt="image-20240805174513403"
	
	
></p>
<h5 id="本地创建了数据库看映射是否正确">本地创建了数据库看映射是否正确！
</h5><ul>
<li>以后mysql改配置在conf中修改
<ul>
<li>假设删除容器后，宿主机挂载的数据还是在的。实现了容器数据持久化功能。</li>
<li>docker</li>
</ul>
</li>
</ul>
<p>yog中创建了一个数据库test，在这里可以看到test</p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240805175224932.png"
	
	
	
	loading="lazy"
	
		alt="image-20240805175224932"
	
	
></p>
<p>出现了</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#容器中</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos ~<span style="color:#f92672">]</span><span style="color:#75715e"># docker ps</span>
</span></span><span style="display:flex;"><span>CONTAINER ID   IMAGE       COMMAND                  CREATED          STATUS          PORTS                                                  NAMES
</span></span><span style="display:flex;"><span>f669f7ef2710   mysql:5.7   <span style="color:#e6db74">&#34;docker-entrypoint.s…&#34;</span>   <span style="color:#ae81ff">14</span> minutes ago   Up <span style="color:#ae81ff">14</span> minutes   33060/tcp, 0.0.0.0:3310-&gt;3306/tcp, :::3310-&gt;3306/tcp   mysql01
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos ~<span style="color:#f92672">]</span><span style="color:#75715e"># docker run -it mysql /bin/bash</span>
</span></span><span style="display:flex;"><span>Unable to find image <span style="color:#e6db74">&#39;mysql:latest&#39;</span> locally
</span></span><span style="display:flex;"><span>^C
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos ~<span style="color:#f92672">]</span><span style="color:#75715e"># docker run -it mysql01 /bin/bash</span>
</span></span><span style="display:flex;"><span>Unable to find image <span style="color:#e6db74">&#39;mysql01:latest&#39;</span> locally
</span></span><span style="display:flex;"><span>^C
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos ~<span style="color:#f92672">]</span><span style="color:#75715e"># docekr exec -it f669f7ef2710 bin/bash</span>
</span></span><span style="display:flex;"><span>bash: docekr: command not found...
</span></span><span style="display:flex;"><span>Similar command is: <span style="color:#e6db74">&#39;docker&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos ~<span style="color:#f92672">]</span><span style="color:#75715e"># docker exec -it f669f7ef2710 bin/bash</span>
</span></span><span style="display:flex;"><span>bash-4.2# cd /var/lib/mysql
</span></span><span style="display:flex;"><span>bash-4.2# ls
</span></span><span style="display:flex;"><span>auto.cnf    ca.pem           client-key.pem  ib_logfile0  ibdata1  mysql       performance_schema  public_key.pem   server-key.pem  test
</span></span><span style="display:flex;"><span>ca-key.pem  client-cert.pem  ib_buffer_pool  ib_logfile1  ibtmp1   mysql.sock  private_key.pem     server-cert.pem  sys
</span></span><span style="display:flex;"><span>bash-4.2# 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#宿主机中</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos /<span style="color:#f92672">]</span><span style="color:#75715e"># cd data</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos data<span style="color:#f92672">]</span><span style="color:#75715e"># ls</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos data<span style="color:#f92672">]</span><span style="color:#75715e"># cd ..</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos /<span style="color:#f92672">]</span><span style="color:#75715e"># cd /home/mysql/data</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos data<span style="color:#f92672">]</span><span style="color:#75715e"># ls</span>
</span></span><span style="display:flex;"><span>auto.cnf    ca.pem           client-key.pem  ibdata1      ib_logfile1  mysql       performance_schema  public_key.pem   server-key.pem  test
</span></span><span style="display:flex;"><span>ca-key.pem  client-cert.pem  ib_buffer_pool  ib_logfile0  ibtmp1       mysql.sock  private_key.pem     server-cert.pem  sys
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos data<span style="color:#f92672">]</span><span style="color:#75715e"># </span>
</span></span></code></pre></div><p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240805175340029.png"
	
	
	
	loading="lazy"
	
		alt="image-20240805175340029"
	
	
></p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240805175851271.png"
	
	
	
	loading="lazy"
	
		alt="image-20240805175851271"
	
	
></p>
<p>删除容器后，宿主机挂载的数据还是在的。实现了容器数据持久化功能。</p>
<h3 id="官方名词具名和匿名挂载">官方名词：具名和匿名挂载
</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e">#匿名挂载</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>-v 容器内路径
</span></span><span style="display:flex;"><span>docker run -d -p --name nginx01 -v /etc/nginx nginx
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>docker  volume --help
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>docker volum ls	 		<span style="color:#75715e">#查看所有volum的镜像</span>
</span></span></code></pre></div><p>docker volume ls</p>
<p>这些都是匿名卷，每一个VOLUME NAME</p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240805180512950.png"
	
	
	
	loading="lazy"
	
		alt="image-20240805180512950"
	
	
></p>
<p>只写了容器内的路径，没有写容器外的路径。</p>
<h2 id="具名挂载">具名挂载
</h2><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SHELL" data-lang="SHELL"><span style="display:flex;"><span><span style="color:#75715e">#具名挂载</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#通过 -v 卷名:容器内路径</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ls 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>docker run -d -P<span style="color:#f92672">(</span>随机映射端口<span style="color:#f92672">)</span> --name nginx02 -v juming-nginx:/etc/nginx nginx
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#juming-nginx这个代表是-v的名字VOLUMN NAME而不是路径。</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#看一下这个卷</span>
</span></span></code></pre></div><p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240805180838927.png"
	
	
	
	loading="lazy"
	
		alt="image-20240805180838927"
	
	
></p>
<h1 id="image-20240805181104283cusersanymoreappdataroamingtyporatypora-user-imagesimage-20240805181104283png"><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240805181104283.png"
	
	
	
	loading="lazy"
	
		alt="image-20240805181104283"
	
	
>
</h1><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SHELL" data-lang="SHELL"><span style="display:flex;"><span><span style="color:#75715e">#是在/var/lib/docker/volumes/juming-nginx/_data</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#	里面就是默认的具名挂载的位置</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#/var/lib/docker/volumes	所有卷存储的位置</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#/var/lib/docker		docker的所有的文件</span>
</span></span></code></pre></div><h3 id="总结-1">总结
</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SHELL" data-lang="SHELL"><span style="display:flex;"><span><span style="color:#75715e">#如何确定是具名挂载还是匿名挂载，还是指定路径挂载！</span>
</span></span><span style="display:flex;"><span>-V容器内路径
</span></span><span style="display:flex;"><span><span style="color:#75715e">#匿名挂载</span>
</span></span><span style="display:flex;"><span>-V卷名：容器内路径
</span></span><span style="display:flex;"><span><span style="color:#75715e">#具名挂载</span>
</span></span><span style="display:flex;"><span>-V/宿主机路径：：容器内路径#指定路径挂载！
</span></span></code></pre></div><h4 id="拓展">拓展：
</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SHELL" data-lang="SHELL"><span style="display:flex;"><span><span style="color:#75715e">#通过 -v 容器内路径:ro  rw  改变读写权限</span>
</span></span><span style="display:flex;"><span>ro 	readonly	<span style="color:#75715e">#只读</span>
</span></span><span style="display:flex;"><span>rw	readwrite	<span style="color:#75715e">#可读可写</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>docker run -d -P<span style="color:#f92672">(</span>随机映射端口<span style="color:#f92672">)</span> --name nginx02 -v juming-nginx:/etc/nginx:ro nginx
</span></span><span style="display:flex;"><span>docker run -d -P<span style="color:#f92672">(</span>随机映射端口<span style="color:#f92672">)</span> --name nginx02 -v juming-nginx:/etc/nginx:rw nginx
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#ro 只要看到ro说明路径只能通过宿主机来操作，容器内部是无法操作的。</span>
</span></span></code></pre></div><h1 id="初识dockerfile">初识DockerFile
</h1><p>是用来构建docker镜像的构建文件！命令脚本！</p>
<p>体验一下：通过 这个脚本生成镜像</p>
<p>镜像是一层层的，脚本是一层层的，每个命令都是一层</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>FROM centos
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>VOLUME <span style="color:#f92672">[</span><span style="color:#e6db74">&#34;volume01&#34;</span>,<span style="color:#e6db74">&#34;volume02&#34;</span><span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>CMD echo <span style="color:#e6db74">&#34;---end---&#34;</span>
</span></span><span style="display:flex;"><span>CMD /bin/bash
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#这里的每个命令就是镜像的一层。</span>
</span></span></code></pre></div><p>创建了自己的镜像</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e">#创建dokcerfile文件</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#文件中的内容，指令（大写）  参数</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos docker-test-volume<span style="color:#f92672">]</span><span style="color:#75715e"># pwd</span>
</span></span><span style="display:flex;"><span>/home/docker-test-volume
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos docker-test-volume<span style="color:#f92672">]</span><span style="color:#75715e"># vim dockerfile1 </span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos docker-test-volume<span style="color:#f92672">]</span><span style="color:#75715e"># cat dockerfile1</span>
</span></span><span style="display:flex;"><span>FROM centos
</span></span><span style="display:flex;"><span>VOLUME <span style="color:#f92672">[</span><span style="color:#e6db74">&#34;volume01&#34;</span>,<span style="color:#e6db74">&#34;volume02&#34;</span><span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>CMD echo <span style="color:#e6db74">&#34;---end---&#34;</span>
</span></span><span style="display:flex;"><span>CMD /bin/bash
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos docker-test-volume<span style="color:#f92672">]</span><span style="color:#75715e"># docker build -f /home/docker-test-volume/dockerfile1 -t kuangsheng/centos .</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>+<span style="color:#f92672">]</span> Building 0.2s <span style="color:#f92672">(</span>5/5<span style="color:#f92672">)</span> FINISHED                                                                            docker:default
</span></span><span style="display:flex;"><span> <span style="color:#f92672">=</span>&gt; <span style="color:#f92672">[</span>internal<span style="color:#f92672">]</span> load build definition from dockerfile1                                                                 0.0s
</span></span><span style="display:flex;"><span> <span style="color:#f92672">=</span>&gt; <span style="color:#f92672">=</span>&gt; transferring dockerfile: 118B                                                                                  0.0s
</span></span><span style="display:flex;"><span> <span style="color:#f92672">=</span>&gt; <span style="color:#f92672">[</span>internal<span style="color:#f92672">]</span> load metadata <span style="color:#66d9ef">for</span> docker.io/library/centos:latest                                                      0.0s
</span></span><span style="display:flex;"><span> <span style="color:#f92672">=</span>&gt; <span style="color:#f92672">[</span>internal<span style="color:#f92672">]</span> load .dockerignore                                                                                     0.0s
</span></span><span style="display:flex;"><span> <span style="color:#f92672">=</span>&gt; <span style="color:#f92672">=</span>&gt; transferring context: 2B                                                                                       0.0s
</span></span><span style="display:flex;"><span> <span style="color:#f92672">=</span>&gt; <span style="color:#f92672">[</span>1/1<span style="color:#f92672">]</span> FROM docker.io/library/centos:latest                                                                        0.0s
</span></span><span style="display:flex;"><span> <span style="color:#f92672">=</span>&gt; exporting to image                                                                                                0.0s
</span></span><span style="display:flex;"><span> <span style="color:#f92672">=</span>&gt; <span style="color:#f92672">=</span>&gt; exporting layers                                                                                               0.0s
</span></span><span style="display:flex;"><span> <span style="color:#f92672">=</span>&gt; <span style="color:#f92672">=</span>&gt; writing image sha256:2771b5374df0a3d1fec5d343805c3291ee35f76cf68d2b731a421cb308eae93f                          0.0s
</span></span><span style="display:flex;"><span> <span style="color:#f92672">=</span>&gt; <span style="color:#f92672">=</span>&gt; naming to docker.io/kuangsheng/centos                                                                          0.0s
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos docker-test-volume<span style="color:#f92672">]</span><span style="color:#75715e"># docker build -f /home/docker-test-volume/dockerfile1 -t kuangsheng/centos1.0 .</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>+<span style="color:#f92672">]</span> Building 0.1s <span style="color:#f92672">(</span>5/5<span style="color:#f92672">)</span> FINISHED                                                                            docker:default
</span></span><span style="display:flex;"><span> <span style="color:#f92672">=</span>&gt; <span style="color:#f92672">[</span>internal<span style="color:#f92672">]</span> load build definition from dockerfile1                                                                 0.0s
</span></span><span style="display:flex;"><span> <span style="color:#f92672">=</span>&gt; <span style="color:#f92672">=</span>&gt; transferring dockerfile: 118B                                                                                  0.0s
</span></span><span style="display:flex;"><span> <span style="color:#f92672">=</span>&gt; <span style="color:#f92672">[</span>internal<span style="color:#f92672">]</span> load metadata <span style="color:#66d9ef">for</span> docker.io/library/centos:latest                                                      0.0s
</span></span><span style="display:flex;"><span> <span style="color:#f92672">=</span>&gt; <span style="color:#f92672">[</span>internal<span style="color:#f92672">]</span> load .dockerignore                                                                                     0.0s
</span></span><span style="display:flex;"><span> <span style="color:#f92672">=</span>&gt; <span style="color:#f92672">=</span>&gt; transferring context: 2B                                                                                       0.0s
</span></span><span style="display:flex;"><span> <span style="color:#f92672">=</span>&gt; CACHED <span style="color:#f92672">[</span>1/1<span style="color:#f92672">]</span> FROM docker.io/library/centos:latest                                                                 0.0s
</span></span><span style="display:flex;"><span> <span style="color:#f92672">=</span>&gt; exporting to image                                                                                                0.0s
</span></span><span style="display:flex;"><span> <span style="color:#f92672">=</span>&gt; <span style="color:#f92672">=</span>&gt; exporting layers                                                                                               0.0s
</span></span><span style="display:flex;"><span> <span style="color:#f92672">=</span>&gt; <span style="color:#f92672">=</span>&gt; writing image sha256:2771b5374df0a3d1fec5d343805c3291ee35f76cf68d2b731a421cb308eae93f                          0.0s
</span></span><span style="display:flex;"><span> <span style="color:#f92672">=</span>&gt; <span style="color:#f92672">=</span>&gt; naming to docker.io/kuangsheng/centos1.0                                                                       0.0s
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos docker-test-volume<span style="color:#f92672">]</span><span style="color:#75715e"># docker images</span>
</span></span><span style="display:flex;"><span>REPOSITORY             TAG          IMAGE ID       CREATED         SIZE
</span></span><span style="display:flex;"><span>tomcat02               1.0          73725f496f3b   <span style="color:#ae81ff">3</span> hours ago     466MB
</span></span><span style="display:flex;"><span>tomcat                 latest       2a60d35653ea   <span style="color:#ae81ff">10</span> days ago     461MB
</span></span><span style="display:flex;"><span>nginx                  latest       a72860cb95fd   <span style="color:#ae81ff">6</span> weeks ago     188MB
</span></span><span style="display:flex;"><span>mysql                  5.7          5107333e08a8   <span style="color:#ae81ff">7</span> months ago    501MB
</span></span><span style="display:flex;"><span>klakegg/hugo           latest-ext   b34dd4f95ea2   <span style="color:#ae81ff">14</span> months ago   1.02GB
</span></span><span style="display:flex;"><span>hello-world            latest       d2c94e258dcb   <span style="color:#ae81ff">15</span> months ago   13.3kB
</span></span><span style="display:flex;"><span>kuangsheng/centos1.0   latest       2771b5374df0   <span style="color:#ae81ff">2</span> years ago     231MB
</span></span><span style="display:flex;"><span>kuangsheng/centos      latest       2771b5374df0   <span style="color:#ae81ff">2</span> years ago     231MB
</span></span><span style="display:flex;"><span>centos                 latest       5d0da3dc9764   <span style="color:#ae81ff">2</span> years ago     231MB
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos docker-test-volume<span style="color:#f92672">]</span><span style="color:#75715e"># </span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e">#启动自己的容器</span>
</span></span><span style="display:flex;"><span>docker images
</span></span><span style="display:flex;"><span>docke run -it 容器id /bin/bash
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@86108f3c0937 /<span style="color:#f92672">]</span><span style="color:#75715e"># ls -l</span>
</span></span><span style="display:flex;"><span>total <span style="color:#ae81ff">56</span>
</span></span><span style="display:flex;"><span>lrwxrwxrwx   <span style="color:#ae81ff">1</span> root root    <span style="color:#ae81ff">7</span> Nov  <span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">2020</span> bin -&gt; usr/bin
</span></span><span style="display:flex;"><span>drwxr-xr-x   <span style="color:#ae81ff">5</span> root root  <span style="color:#ae81ff">360</span> Aug  <span style="color:#ae81ff">5</span> 10:35 dev
</span></span><span style="display:flex;"><span>drwxr-xr-x   <span style="color:#ae81ff">1</span> root root <span style="color:#ae81ff">4096</span> Aug  <span style="color:#ae81ff">5</span> 10:35 etc
</span></span><span style="display:flex;"><span>drwxr-xr-x   <span style="color:#ae81ff">2</span> root root <span style="color:#ae81ff">4096</span> Nov  <span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">2020</span> home
</span></span><span style="display:flex;"><span>lrwxrwxrwx   <span style="color:#ae81ff">1</span> root root    <span style="color:#ae81ff">7</span> Nov  <span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">2020</span> lib -&gt; usr/lib
</span></span><span style="display:flex;"><span>lrwxrwxrwx   <span style="color:#ae81ff">1</span> root root    <span style="color:#ae81ff">9</span> Nov  <span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">2020</span> lib64 -&gt; usr/lib64
</span></span><span style="display:flex;"><span>drwx------   <span style="color:#ae81ff">2</span> root root <span style="color:#ae81ff">4096</span> Sep <span style="color:#ae81ff">15</span>  <span style="color:#ae81ff">2021</span> lost+found
</span></span><span style="display:flex;"><span>drwxr-xr-x   <span style="color:#ae81ff">2</span> root root <span style="color:#ae81ff">4096</span> Nov  <span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">2020</span> media
</span></span><span style="display:flex;"><span>drwxr-xr-x   <span style="color:#ae81ff">2</span> root root <span style="color:#ae81ff">4096</span> Nov  <span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">2020</span> mnt
</span></span><span style="display:flex;"><span>drwxr-xr-x   <span style="color:#ae81ff">2</span> root root <span style="color:#ae81ff">4096</span> Nov  <span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">2020</span> opt
</span></span><span style="display:flex;"><span>dr-xr-xr-x <span style="color:#ae81ff">190</span> root root    <span style="color:#ae81ff">0</span> Aug  <span style="color:#ae81ff">5</span> 10:35 proc
</span></span><span style="display:flex;"><span>dr-xr-x---   <span style="color:#ae81ff">2</span> root root <span style="color:#ae81ff">4096</span> Sep <span style="color:#ae81ff">15</span>  <span style="color:#ae81ff">2021</span> root
</span></span><span style="display:flex;"><span>drwxr-xr-x  <span style="color:#ae81ff">11</span> root root <span style="color:#ae81ff">4096</span> Sep <span style="color:#ae81ff">15</span>  <span style="color:#ae81ff">2021</span> run
</span></span><span style="display:flex;"><span>lrwxrwxrwx   <span style="color:#ae81ff">1</span> root root    <span style="color:#ae81ff">8</span> Nov  <span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">2020</span> sbin -&gt; usr/sbin
</span></span><span style="display:flex;"><span>drwxr-xr-x   <span style="color:#ae81ff">2</span> root root <span style="color:#ae81ff">4096</span> Nov  <span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">2020</span> srv
</span></span><span style="display:flex;"><span>dr-xr-xr-x  <span style="color:#ae81ff">13</span> root root    <span style="color:#ae81ff">0</span> Aug  <span style="color:#ae81ff">5</span> 10:35 sys
</span></span><span style="display:flex;"><span>drwxrwxrwt   <span style="color:#ae81ff">7</span> root root <span style="color:#ae81ff">4096</span> Sep <span style="color:#ae81ff">15</span>  <span style="color:#ae81ff">2021</span> tmp
</span></span><span style="display:flex;"><span>drwxr-xr-x  <span style="color:#ae81ff">12</span> root root <span style="color:#ae81ff">4096</span> Sep <span style="color:#ae81ff">15</span>  <span style="color:#ae81ff">2021</span> usr
</span></span><span style="display:flex;"><span>drwxr-xr-x  <span style="color:#ae81ff">20</span> root root <span style="color:#ae81ff">4096</span> Sep <span style="color:#ae81ff">15</span>  <span style="color:#ae81ff">2021</span> var
</span></span><span style="display:flex;"><span>drwxr-xr-x   <span style="color:#ae81ff">2</span> root root <span style="color:#ae81ff">4096</span> Aug  <span style="color:#ae81ff">5</span> 10:35 volume01
</span></span><span style="display:flex;"><span>drwxr-xr-x   <span style="color:#ae81ff">2</span> root root <span style="color:#ae81ff">4096</span> Aug  <span style="color:#ae81ff">5</span> 10:35 volume02
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@86108f3c0937 /<span style="color:#f92672">]</span><span style="color:#75715e"># </span>
</span></span></code></pre></div><p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240805183637047.png"
	
	
	
	loading="lazy"
	
		alt="image-20240805183637047"
	
	
></p>
<p>自动挂载的两个数据卷目录。</p>
<p>进入容器的volume01目录，创建文件，测试容器内的volume01是否和宿主机的docker的默认volume存储路径下的随机目录下的volume01文件是否同步。</p>
<p>而且</p>
<p>VOLUME [&ldquo;volume01&rdquo;,&ldquo;volume02&rdquo;]一定是个匿名挂载。所以查看位置</p>
<p>从宿主机的docker的默认volume存储路径下（inspect可以查看容器信息，M中有volume01和02的存储在宿主机的docker的默认volume存储路径下的随机目录位置）</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e">#查看镜像</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos docker-test-volume<span style="color:#f92672">]</span><span style="color:#75715e"># docker images</span>
</span></span><span style="display:flex;"><span>REPOSITORY             TAG          IMAGE ID       CREATED         SIZE
</span></span><span style="display:flex;"><span>tomcat02               1.0          73725f496f3b   <span style="color:#ae81ff">3</span> hours ago     466MB
</span></span><span style="display:flex;"><span>tomcat                 latest       2a60d35653ea   <span style="color:#ae81ff">10</span> days ago     461MB
</span></span><span style="display:flex;"><span>nginx                  latest       a72860cb95fd   <span style="color:#ae81ff">6</span> weeks ago     188MB
</span></span><span style="display:flex;"><span>mysql                  5.7          5107333e08a8   <span style="color:#ae81ff">7</span> months ago    501MB
</span></span><span style="display:flex;"><span>klakegg/hugo           latest-ext   b34dd4f95ea2   <span style="color:#ae81ff">14</span> months ago   1.02GB
</span></span><span style="display:flex;"><span>hello-world            latest       d2c94e258dcb   <span style="color:#ae81ff">15</span> months ago   13.3kB
</span></span><span style="display:flex;"><span>kuangsheng/centos1.0   latest       2771b5374df0   <span style="color:#ae81ff">2</span> years ago     231MB
</span></span><span style="display:flex;"><span>kuangsheng/centos      latest       2771b5374df0   <span style="color:#ae81ff">2</span> years ago     231MB
</span></span><span style="display:flex;"><span>centos                 latest       5d0da3dc9764   <span style="color:#ae81ff">2</span> years ago     231MB
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#进入容器</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos docker-test-volume<span style="color:#f92672">]</span><span style="color:#75715e"># docker run -it 2771b5374df0 /bin/bash</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@86108f3c0937 /<span style="color:#f92672">]</span><span style="color:#75715e"># ls -l</span>
</span></span><span style="display:flex;"><span>total <span style="color:#ae81ff">56</span>
</span></span><span style="display:flex;"><span>lrwxrwxrwx   <span style="color:#ae81ff">1</span> root root    <span style="color:#ae81ff">7</span> Nov  <span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">2020</span> bin -&gt; usr/bin
</span></span><span style="display:flex;"><span>drwxr-xr-x   <span style="color:#ae81ff">5</span> root root  <span style="color:#ae81ff">360</span> Aug  <span style="color:#ae81ff">5</span> 10:35 dev
</span></span><span style="display:flex;"><span>drwxr-xr-x   <span style="color:#ae81ff">1</span> root root <span style="color:#ae81ff">4096</span> Aug  <span style="color:#ae81ff">5</span> 10:35 etc
</span></span><span style="display:flex;"><span>drwxr-xr-x   <span style="color:#ae81ff">2</span> root root <span style="color:#ae81ff">4096</span> Nov  <span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">2020</span> home
</span></span><span style="display:flex;"><span>lrwxrwxrwx   <span style="color:#ae81ff">1</span> root root    <span style="color:#ae81ff">7</span> Nov  <span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">2020</span> lib -&gt; usr/lib
</span></span><span style="display:flex;"><span>lrwxrwxrwx   <span style="color:#ae81ff">1</span> root root    <span style="color:#ae81ff">9</span> Nov  <span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">2020</span> lib64 -&gt; usr/lib64
</span></span><span style="display:flex;"><span>drwx------   <span style="color:#ae81ff">2</span> root root <span style="color:#ae81ff">4096</span> Sep <span style="color:#ae81ff">15</span>  <span style="color:#ae81ff">2021</span> lost+found
</span></span><span style="display:flex;"><span>drwxr-xr-x   <span style="color:#ae81ff">2</span> root root <span style="color:#ae81ff">4096</span> Nov  <span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">2020</span> media
</span></span><span style="display:flex;"><span>drwxr-xr-x   <span style="color:#ae81ff">2</span> root root <span style="color:#ae81ff">4096</span> Nov  <span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">2020</span> mnt
</span></span><span style="display:flex;"><span>drwxr-xr-x   <span style="color:#ae81ff">2</span> root root <span style="color:#ae81ff">4096</span> Nov  <span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">2020</span> opt
</span></span><span style="display:flex;"><span>dr-xr-xr-x <span style="color:#ae81ff">190</span> root root    <span style="color:#ae81ff">0</span> Aug  <span style="color:#ae81ff">5</span> 10:35 proc
</span></span><span style="display:flex;"><span>dr-xr-x---   <span style="color:#ae81ff">2</span> root root <span style="color:#ae81ff">4096</span> Sep <span style="color:#ae81ff">15</span>  <span style="color:#ae81ff">2021</span> root
</span></span><span style="display:flex;"><span>drwxr-xr-x  <span style="color:#ae81ff">11</span> root root <span style="color:#ae81ff">4096</span> Sep <span style="color:#ae81ff">15</span>  <span style="color:#ae81ff">2021</span> run
</span></span><span style="display:flex;"><span>lrwxrwxrwx   <span style="color:#ae81ff">1</span> root root    <span style="color:#ae81ff">8</span> Nov  <span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">2020</span> sbin -&gt; usr/sbin
</span></span><span style="display:flex;"><span>drwxr-xr-x   <span style="color:#ae81ff">2</span> root root <span style="color:#ae81ff">4096</span> Nov  <span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">2020</span> srv
</span></span><span style="display:flex;"><span>dr-xr-xr-x  <span style="color:#ae81ff">13</span> root root    <span style="color:#ae81ff">0</span> Aug  <span style="color:#ae81ff">5</span> 10:35 sys
</span></span><span style="display:flex;"><span>drwxrwxrwt   <span style="color:#ae81ff">7</span> root root <span style="color:#ae81ff">4096</span> Sep <span style="color:#ae81ff">15</span>  <span style="color:#ae81ff">2021</span> tmp
</span></span><span style="display:flex;"><span>drwxr-xr-x  <span style="color:#ae81ff">12</span> root root <span style="color:#ae81ff">4096</span> Sep <span style="color:#ae81ff">15</span>  <span style="color:#ae81ff">2021</span> usr
</span></span><span style="display:flex;"><span>drwxr-xr-x  <span style="color:#ae81ff">20</span> root root <span style="color:#ae81ff">4096</span> Sep <span style="color:#ae81ff">15</span>  <span style="color:#ae81ff">2021</span> var
</span></span><span style="display:flex;"><span>drwxr-xr-x   <span style="color:#ae81ff">2</span> root root <span style="color:#ae81ff">4096</span> Aug  <span style="color:#ae81ff">5</span> 10:35 volume01
</span></span><span style="display:flex;"><span>drwxr-xr-x   <span style="color:#ae81ff">2</span> root root <span style="color:#ae81ff">4096</span> Aug  <span style="color:#ae81ff">5</span> 10:35 volume02
</span></span><span style="display:flex;"><span><span style="color:#75715e">#看得到自己创建的镜像中有volume01和volume02</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#1.查看匿名挂载的路径</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos ~<span style="color:#f92672">]</span><span style="color:#75715e"># docker ps</span>
</span></span><span style="display:flex;"><span>CONTAINER ID   IMAGE          COMMAND                  CREATED             STATUS             PORTS                                                  NAMES
</span></span><span style="display:flex;"><span>86108f3c0937   2771b5374df0   <span style="color:#e6db74">&#34;/bin/bash&#34;</span>              <span style="color:#ae81ff">16</span> minutes ago      Up <span style="color:#ae81ff">16</span> minutes                                                             inspiring_herschel
</span></span><span style="display:flex;"><span>f669f7ef2710   mysql:5.7      <span style="color:#e6db74">&#34;docker-entrypoint.s…&#34;</span>   About an hour ago   Up About an hour   33060/tcp, 0.0.0.0:3310-&gt;3306/tcp, :::3310-&gt;3306/tcp   mysql01
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos ~<span style="color:#f92672">]</span><span style="color:#75715e"># docker inspect 86108f3c0937</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#可以看到</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;Mounts&#34;</span>: <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;Type&#34;</span>: <span style="color:#e6db74">&#34;volume&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;Name&#34;</span>: <span style="color:#e6db74">&#34;af212811e19c881aa2e1312de4831e5c1714828543b623ea40d7ff1b43d76806&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;Source&#34;</span>: <span style="color:#e6db74">&#34;/var/lib/docker/volumes/af212811e19c881aa2e1312de4831e5c1714828543b623ea40d7ff1b43d76806/_data&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;Destination&#34;</span>: <span style="color:#e6db74">&#34;volume01&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;Driver&#34;</span>: <span style="color:#e6db74">&#34;local&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;Mode&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;RW&#34;</span>: true,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;Propagation&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;Type&#34;</span>: <span style="color:#e6db74">&#34;volume&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;Name&#34;</span>: <span style="color:#e6db74">&#34;19f9e9a6dc7a7606d7b2981ffeaa3d95b94228c61d37607add71622e3187bae5&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;Source&#34;</span>: <span style="color:#e6db74">&#34;/var/lib/docker/volumes/19f9e9a6dc7a7606d7b2981ffeaa3d95b94228c61d37607add71622e3187bae5/_data&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;Destination&#34;</span>: <span style="color:#e6db74">&#34;volume02&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;Driver&#34;</span>: <span style="color:#e6db74">&#34;local&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;Mode&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;RW&#34;</span>: true,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;Propagation&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">]</span>,
</span></span><span style="display:flex;"><span><span style="color:#75715e">#包含有宿主机中的docker的volume存储路径，以及volume01和02的匿名存储路径</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#/var/lib/docker/volumes/af212811e19c881aa2e1312de4831e5c1714828543b623ea40d7ff1b43d76806/_data</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#/var/lib/docker/volumes/19f9e9a6dc7a7606d7b2981ffeaa3d95b94228c61d37607add71622e3187bae5/_data&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#2.测试文件是否同步</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#在自己创建的docker中进入volume01创建continer.txt</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@86108f3c0937 /<span style="color:#f92672">]</span><span style="color:#75715e"># cd /volume01 </span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@86108f3c0937 volume01<span style="color:#f92672">]</span><span style="color:#75715e"># mkdir continer.txt</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@86108f3c0937 volume01<span style="color:#f92672">]</span><span style="color:#75715e"># ls</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#通过进入容器，然后从容器信息中获得匿名挂载的volume01的宿主机的docker默认volume(容器数据卷)存储路径。</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#进入后查看</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#/var/lib/docker/volumes/af212811e19c881aa2e1312de4831e5c1714828543b623ea40d7ff1b43d76806/_data</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos ~<span style="color:#f92672">]</span><span style="color:#75715e"># cd /var/lib/docker/volumes/af212811e19c881aa2e1312de4831e5c1714828543b623ea40d7ff1b43d76806/_data</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos _data<span style="color:#f92672">]</span><span style="color:#75715e"># ls</span>
</span></span><span style="display:flex;"><span>continer.txt
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos _data<span style="color:#f92672">]</span><span style="color:#75715e"># </span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#成功！</span>
</span></span></code></pre></div><p><strong>自己构建镜像的时候，要手动镜像挂在 -v 卷名:容器内路径。</strong></p>
<h2 id="数据卷容器多个容器之间同步">数据卷容器（多个容器之间同步）
</h2><p>两个Mysql同步数据、多个Mysql同步数据！</p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240805190454824.png"
	
	
	
	loading="lazy"
	
		alt="image-20240805190454824"
	
	
></p>
<p>被挂载的容器叫做数据卷容器</p>
<p>或者多个容器之间实现数据共享</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e">#启动3个容器，通过我们自己写的镜像启动 </span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos _data<span style="color:#f92672">]</span><span style="color:#75715e"># docker images</span>
</span></span><span style="display:flex;"><span>REPOSITORY             TAG          IMAGE ID       CREATED         SIZE
</span></span><span style="display:flex;"><span>tomcat02               1.0          73725f496f3b   <span style="color:#ae81ff">3</span> hours ago     466MB
</span></span><span style="display:flex;"><span>tomcat                 latest       2a60d35653ea   <span style="color:#ae81ff">10</span> days ago     461MB
</span></span><span style="display:flex;"><span>nginx                  latest       a72860cb95fd   <span style="color:#ae81ff">6</span> weeks ago     188MB
</span></span><span style="display:flex;"><span>mysql                  5.7          5107333e08a8   <span style="color:#ae81ff">7</span> months ago    501MB
</span></span><span style="display:flex;"><span>klakegg/hugo           latest-ext   b34dd4f95ea2   <span style="color:#ae81ff">14</span> months ago   1.02GB
</span></span><span style="display:flex;"><span>hello-world            latest       d2c94e258dcb   <span style="color:#ae81ff">15</span> months ago   13.3kB
</span></span><span style="display:flex;"><span>centos                 latest       5d0da3dc9764   <span style="color:#ae81ff">2</span> years ago     231MB
</span></span><span style="display:flex;"><span>kuangsheng/centos1.0   latest       2771b5374df0   <span style="color:#ae81ff">2</span> years ago     231MB
</span></span><span style="display:flex;"><span>kuangsheng/centos      latest       2771b5374df0   <span style="color:#ae81ff">2</span> years ago     231MB
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos _data<span style="color:#f92672">]</span><span style="color:#75715e"># docker run -it --name docker01 kuangsheng/centos1.0</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@a9cdbd4560f7 /<span style="color:#f92672">]</span><span style="color:#75715e"># ls </span>
</span></span><span style="display:flex;"><span>bin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var  volume01  volume02
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@a9cdbd4560f7 /<span style="color:#f92672">]</span><span style="color:#75715e"># ls -l</span>
</span></span><span style="display:flex;"><span>total <span style="color:#ae81ff">56</span>
</span></span><span style="display:flex;"><span>lrwxrwxrwx   <span style="color:#ae81ff">1</span> root root    <span style="color:#ae81ff">7</span> Nov  <span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">2020</span> bin -&gt; usr/bin
</span></span><span style="display:flex;"><span>drwxr-xr-x   <span style="color:#ae81ff">5</span> root root  <span style="color:#ae81ff">360</span> Aug  <span style="color:#ae81ff">5</span> 11:07 dev
</span></span><span style="display:flex;"><span>drwxr-xr-x   <span style="color:#ae81ff">1</span> root root <span style="color:#ae81ff">4096</span> Aug  <span style="color:#ae81ff">5</span> 11:07 etc
</span></span><span style="display:flex;"><span>drwxr-xr-x   <span style="color:#ae81ff">2</span> root root <span style="color:#ae81ff">4096</span> Nov  <span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">2020</span> home
</span></span><span style="display:flex;"><span>lrwxrwxrwx   <span style="color:#ae81ff">1</span> root root    <span style="color:#ae81ff">7</span> Nov  <span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">2020</span> lib -&gt; usr/lib
</span></span><span style="display:flex;"><span>lrwxrwxrwx   <span style="color:#ae81ff">1</span> root root    <span style="color:#ae81ff">9</span> Nov  <span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">2020</span> lib64 -&gt; usr/lib64
</span></span><span style="display:flex;"><span>drwx------   <span style="color:#ae81ff">2</span> root root <span style="color:#ae81ff">4096</span> Sep <span style="color:#ae81ff">15</span>  <span style="color:#ae81ff">2021</span> lost+found
</span></span><span style="display:flex;"><span>drwxr-xr-x   <span style="color:#ae81ff">2</span> root root <span style="color:#ae81ff">4096</span> Nov  <span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">2020</span> media
</span></span><span style="display:flex;"><span>drwxr-xr-x   <span style="color:#ae81ff">2</span> root root <span style="color:#ae81ff">4096</span> Nov  <span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">2020</span> mnt
</span></span><span style="display:flex;"><span>drwxr-xr-x   <span style="color:#ae81ff">2</span> root root <span style="color:#ae81ff">4096</span> Nov  <span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">2020</span> opt
</span></span><span style="display:flex;"><span>dr-xr-xr-x <span style="color:#ae81ff">191</span> root root    <span style="color:#ae81ff">0</span> Aug  <span style="color:#ae81ff">5</span> 11:07 proc
</span></span><span style="display:flex;"><span>dr-xr-x---   <span style="color:#ae81ff">2</span> root root <span style="color:#ae81ff">4096</span> Sep <span style="color:#ae81ff">15</span>  <span style="color:#ae81ff">2021</span> root
</span></span><span style="display:flex;"><span>drwxr-xr-x  <span style="color:#ae81ff">11</span> root root <span style="color:#ae81ff">4096</span> Sep <span style="color:#ae81ff">15</span>  <span style="color:#ae81ff">2021</span> run
</span></span><span style="display:flex;"><span>lrwxrwxrwx   <span style="color:#ae81ff">1</span> root root    <span style="color:#ae81ff">8</span> Nov  <span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">2020</span> sbin -&gt; usr/sbin
</span></span><span style="display:flex;"><span>drwxr-xr-x   <span style="color:#ae81ff">2</span> root root <span style="color:#ae81ff">4096</span> Nov  <span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">2020</span> srv
</span></span><span style="display:flex;"><span>dr-xr-xr-x  <span style="color:#ae81ff">13</span> root root    <span style="color:#ae81ff">0</span> Aug  <span style="color:#ae81ff">5</span> 10:36 sys
</span></span><span style="display:flex;"><span>drwxrwxrwt   <span style="color:#ae81ff">7</span> root root <span style="color:#ae81ff">4096</span> Sep <span style="color:#ae81ff">15</span>  <span style="color:#ae81ff">2021</span> tmp
</span></span><span style="display:flex;"><span>drwxr-xr-x  <span style="color:#ae81ff">12</span> root root <span style="color:#ae81ff">4096</span> Sep <span style="color:#ae81ff">15</span>  <span style="color:#ae81ff">2021</span> usr
</span></span><span style="display:flex;"><span>drwxr-xr-x  <span style="color:#ae81ff">20</span> root root <span style="color:#ae81ff">4096</span> Sep <span style="color:#ae81ff">15</span>  <span style="color:#ae81ff">2021</span> var
</span></span><span style="display:flex;"><span>drwxr-xr-x   <span style="color:#ae81ff">2</span> root root <span style="color:#ae81ff">4096</span> Aug  <span style="color:#ae81ff">5</span> 11:07 volume01
</span></span><span style="display:flex;"><span>drwxr-xr-x   <span style="color:#ae81ff">2</span> root root <span style="color:#ae81ff">4096</span> Aug  <span style="color:#ae81ff">5</span> 11:07 volume02
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@a9cdbd4560f7 /<span style="color:#f92672">]</span><span style="color:#75715e"># </span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#那么现在来创建第二个容器，ctrl+p+q退出当前容器但是不退出运行。</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#03和02绑定</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos _data<span style="color:#f92672">]</span><span style="color:#75715e"># docker run -it --name docker03 --volumes-from docker02 kuangsheng/centos1.0</span>
</span></span></code></pre></div><p><a class="link" href="https://www.bilibili.com/video/BV1og4y1q7M4/?p=25&amp;spm_id_from=pageDriver&amp;vd_source=7380129e81d052c5b32ce598508c71d5"  target="_blank" rel="noopener"
    >25、数据卷容器_哔哩哔哩_bilibili05:05</a></p>
<p>这样创建的docker03会同步到docker02，而父容器02叫数据卷容器。</p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240805221156936.png"
	
	
	
	loading="lazy"
	
		alt="image-20240805221156936"
	
	
></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SHELL" data-lang="SHELL"><span style="display:flex;"><span>如果docker run -it --name docker04 --volumes-from docker02 kuangsheng/centos1.0
</span></span></code></pre></div><p>中04父容器为02，也是可以同步的。</p>
<p>04父容器为02也是可以同步的。</p>
<p>而docker02的父容器为docker01。</p>
<p>删除了dokcer01其他数据还是依然在的。</p>
<p>所以是一种备份机制。</p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240805221703745.png"
	
	
	
	loading="lazy"
	
		alt="image-20240805221703745"
	
	
></p>
<h5 id="应用多个mysql实现数据共享启动两个mysql共用一个数据库行不行">应用：多个mysql实现数据共享，启动两个mysql共用一个数据库行不行?
</h5><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SHELL" data-lang="SHELL"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@kuangshen home<span style="color:#f92672">]</span><span style="color:#75715e">#docker run -d -p 3310:3306 -v /etc/mysq1/conf.d -v /var/1ib/mysq1 -e MYSQL_ROOT_PASSWORD=123456 --name mysql mysql:5.7</span>
</span></span><span style="display:flex;"><span>MYSQL_ROOT_PASSWORD<span style="color:#f92672">=</span><span style="color:#ae81ff">123456</span> --name mysq101 mysq1 5.7
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@kuangshen home<span style="color:#f92672">]</span><span style="color:#75715e">#docker run -d -p 3310:3306 -e MYSQL_ROOT_PASSWORD=123456 --name mysq102 -- volumes -from mysql01 mysql:5.7</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#这个时候，可以实现两个容器数据同步！</span>
</span></span></code></pre></div><p><strong>结论：</strong>
容器之间配置信息的传递，数据卷容器的生命周期一直持续到没有容器使用为止。
但是一旦你持久化到了本地，这个时候，本地的数据是不会制除的！</p>
<p>’总结：数据和容器，容器删除了，容器能持久化保存</p>
<p>一、-v 直接挂载：具名和匿名挂载</p>
<p>二、dockerfile 构建镜像的时候直接进行挂载</p>
<p>三、容器数据卷之间的挂载，&ndash;volume from，实现。</p>
<p>01 02 03 中02删除了，01 03还是能同步。</p>
<h1 id="dockerfile">DockerFile
</h1><p>核心：用来构建docker镜像的文件。是一个命参数脚本。</p>
<p>构建步骤：</p>
<p>1、编写一个dockerfile文件</p>
<p>2、docker build构建成为一个镜像</p>
<p>3、docker run运行镜像</p>
<p>4、docker push 发布镜像（DockerHub、阿里云镜像仓库）</p>
<p>在dockerhub中点击链接后跳转的就是dockerfile。</p>
<h5 id="搜索dockerfile命令">搜索dockerfile命令
</h5><p>centos+tomcat+jdk+mysql</p>
<p>/bin/bash控制台</p>
<h2 id="基础知识">基础知识
</h2><p>1、每个保留关键字（指令）都是必须是大写字母</p>
<p>2、执行从上到下顺序执行</p>
<p>3、#表示注释</p>
<p>4、每一个指令都会创建提交一个新的镜像层，并提交！</p>
<p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240805223501785.png"
	
	
	
	loading="lazy"
	
		alt="image-20240805223501785"
	
	
></p>
<p>dockerfile是面向开发的，我们以后要发布项目，做镜像，就需要编写dockerfike文件，这个文件十分简单！</p>
<p>docker镜像逐渐成为企业交付的标准，必须要掌握！</p>
<p>步骤：开发，部署，运维。。。</p>
<p>DockerFile:构建文件,定义了一切步骤，源代码。</p>
<p>DockerImages：通过DockerFile构建生成的镜像，最终发布和运行的产品！</p>
<p>Docker容器：容器就是镜像运行起来提供服务的。</p>
<p>后两个我们已经会了，而第一个需要再学。</p>
<h2 id="dockerfile的指令">DockerFile的指令
</h2><p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240805223928380.png"
	
	
	
	loading="lazy"
	
		alt="image-20240805223928380"
	
	
></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>FROM		<span style="color:#75715e">#基础镜像，一切从这里开始构建</span>
</span></span><span style="display:flex;"><span>MAINATINER	<span style="color:#75715e">#镜像是谁写的，一般姓名+邮箱</span>
</span></span><span style="display:flex;"><span>RUN			<span style="color:#75715e">#镜像构建的时候需要运行的命令</span>
</span></span><span style="display:flex;"><span>ADD			<span style="color:#75715e">#步骤，tomcat镜像，这个tomcat压缩包！添加内容</span>
</span></span><span style="display:flex;"><span>WORKDIR		<span style="color:#75715e">#镜像的工作目录</span>
</span></span><span style="display:flex;"><span>VOLUME		<span style="color:#75715e">#设置挂载的目录</span>
</span></span><span style="display:flex;"><span>EXPOSE		<span style="color:#75715e">#暴露端口配置</span>
</span></span><span style="display:flex;"><span>RUN			<span style="color:#75715e">#</span>
</span></span><span style="display:flex;"><span>CMD			<span style="color:#75715e">#指定这个容器启动的时候要运行的命令，只有最后一个会生效，可被替代</span>
</span></span><span style="display:flex;"><span>ENTRYPOINT	<span style="color:#75715e">#指定这个容器启动的时候要运行的命令，可以追加命令</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>容器里面：ls -a
</span></span><span style="display:flex;"><span>容器外运行
</span></span><span style="display:flex;"><span>docker run -l		<span style="color:#75715e">#那么CMD是替换-l为-a</span>
</span></span><span style="display:flex;"><span>docker run -l		<span style="color:#75715e">#追加的命令</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ONBUILD				<span style="color:#75715e">#当构建一个被继承的Dockerfile 这个时候就会运行ONEBUILD 的指令。是一个触发指令</span>
</span></span><span style="display:flex;"><span>COPY				<span style="color:#75715e">#类似ADD，将我们的文件拷贝到镜像中</span>
</span></span><span style="display:flex;"><span>ENV					<span style="color:#75715e">#构建的时候设置环境变量，myslq用户名密码，内存大小。。。</span>
</span></span></code></pre></div><h2 id="实战测试">实战测试
</h2><p>Docker Hub中99%镜像都是从这个基础镜像过来的FROM scratch，配置我们的软件进行配置</p>
<ul>
<li>创建一个自己的centos</li>
</ul>
<p>看看官方的cenos的vim没有config没有</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SHELL" data-lang="SHELL"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos dockerfile<span style="color:#f92672">]</span><span style="color:#75715e"># vim mydockfile-centos</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos dockerfile<span style="color:#f92672">]</span><span style="color:#75715e"># docker run -it centos</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@98252f5f8b60 /<span style="color:#f92672">]</span><span style="color:#75715e"># pwd</span>
</span></span><span style="display:flex;"><span>/
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@98252f5f8b60 /<span style="color:#f92672">]</span><span style="color:#75715e"># vim</span>
</span></span><span style="display:flex;"><span>bash: vim: command not found
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@98252f5f8b60 /<span style="color:#f92672">]</span><span style="color:#75715e"># ifconfig</span>
</span></span><span style="display:flex;"><span>bash: ifconfig: command not found
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@98252f5f8b60 /<span style="color:#f92672">]</span><span style="color:#75715e"># </span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SHELL" data-lang="SHELL"><span style="display:flex;"><span><span style="color:#75715e">#编写文件</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos dockerfile<span style="color:#f92672">]</span><span style="color:#75715e"># vim mydockfile-centos</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos dockerfile<span style="color:#f92672">]</span><span style="color:#75715e"># cat mydockfile-centos </span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@VM-12-5-centos dockerfile<span style="color:#f92672">]</span><span style="color:#75715e"># cat mydockfile-centos </span>
</span></span><span style="display:flex;"><span>FROM centos:7
</span></span><span style="display:flex;"><span>MAINTAINER poolbee&lt;Cr8462643@163.com&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ENV MYPATH /usr/local
</span></span><span style="display:flex;"><span>WORKDIR $MYPATH
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>RUN yum -y install vim
</span></span><span style="display:flex;"><span>RUN yum -y install net-tools
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>EXPOSE <span style="color:#ae81ff">80</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>CMD echo $MYPATH
</span></span><span style="display:flex;"><span>CMD echo <span style="color:#e6db74">&#34;------end------&#34;</span>
</span></span><span style="display:flex;"><span>CMD /bin/bash
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#创建</span>
</span></span></code></pre></div><p><a class="link" href="https://www.bilibili.com/video/BV1og4y1q7M4/?p=28&amp;spm_id_from=pageDriver&amp;vd_source=7380129e81d052c5b32ce598508c71d5"  target="_blank" rel="noopener"
    >28、实战：构建自己的centos_哔哩哔哩_bilibili08:03</a></p>
<h1 id="docker网络">Docker网络
</h1><h1 id="企业实战">企业实战
</h1><h1 id="docker-compose">Docker Compose
</h1><h1 id="docker-swarm">Docker Swarm
</h1><h1 id="cicd-jenkins-流水线">CI/CD jenkins 流水线
</h1><p><img src="C:%5cUsers%5canymore%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20240804014232085.png"
	
	
	
	loading="lazy"
	
		alt="image-20240804014232085"
	
	
></p>
<p>推荐一本书，docker [<img src="https://i0.hdslb.com/bfs/reply/9f3ad0659e84c96a711b88dd33f4bc2e945045e0.png"
	
	
	
	loading="lazy"
	
		alt="img"
	
	
>deep dive](<a class="link" href="https://search.bilibili.com/all?from_source=webcommentline_search&amp;keyword=deep"  target="_blank" rel="noopener"
    >https://search.bilibili.com/all?from_source=webcommentline_search&keyword=deep</a> dive&amp;seid=10239879385810437677),作者<a class="link" href="https://search.bilibili.com/all?from_source=webcommentline_search&amp;keyword=Nigel&amp;seid=10239879385810437677"  target="_blank" rel="noopener"
    ><img src="https://i0.hdslb.com/bfs/reply/9f3ad0659e84c96a711b88dd33f4bc2e945045e0.png"
	
	
	
	loading="lazy"
	
		alt="img"
	
	
>Nigel</a> Poulton，结合这个视频，效果更好</p>



    
</section>


    <footer class="article-footer">
    

    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

     
    
        
    <script src='//unpkg.com/@waline/client@v2/dist/waline.js'></script>
<link href='//unpkg.com/@waline/client@v2/dist/waline.css' rel='stylesheet'/>
<div id="waline" class="waline-container"></div>
<style>
    .waline-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
        --waline-font-size: var(--article-font-size);
    }
    .waline-container .wl-count {
        color: var(--card-text-color-main);
    }
</style><script>
    
    Waline.init({"dark":"html[data-scheme=\"dark\"]","el":"#waline","emoji":["https://cdn.jsdelivr.net/gh/walinejs/emojis/weibo"],"lang":"zh-CN","locale":{"admin":"Admin","placeholder":"说点什么吧~~请填写正确的昵称和邮箱，方便接受评论回复信息"},"requiredMeta":["nick","mail","url"],"serverURL":"https://waline-poolbee.vercel.app"});
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2023 - 
        
        2024 PoolBee的博客
    </section>
    
    
    <a href="https://github.com/PoolBee/PoolBee.github.io" target="_blank">
        <img src="https://ghchart.rshah.org/poolbee" />
    </a>
    

    <section class="powerby">
         <br />
        
    </section>


    <section class="count_info">
    
        <div>
            在漫长的
            <span id="ds" class="running-days"></span>
            天
            <span id="hs" class="running-days"></span>
            小时
            <span id="ms" class="running-days"></span>
            分钟中
        </div>

    
        <div>
            
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
             
             
          
            
       
            · 写下 14 篇文章、总计 9.59 k 字
        </div> 

    
        <div>
            <span id="busuanzi_container_site_pv">· 迎接<span id="busuanzi_value_site_pv"></span>次不期而遇。</span>
        </div>
        
    </section>
    


    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
	 
        


    <script>
        let s1 = '2023-6-09'; 
        s1 = new Date(s1.replace(/-/g, "/"));
        let s2 = new Date();
        let timeDifference = s2.getTime() - s1.getTime();

        let days = Math.floor(timeDifference / (1000 * 60 * 60 * 24));
        let hours = Math.floor((timeDifference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        let minutes = Math.floor((timeDifference % (1000 * 60 * 60)) / (1000 * 60));
        document.getElementById('ds').innerHTML = days;
        document.getElementById('hs').innerHTML = hours;
        document.getElementById('ms').innerHTML = minutes;
        
    </script>
    
</footer>
<style>
     
.site-footer {
    text-align: center;
}
</style>

    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            
        </main>
        
    </div>

    <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script><script type="text/javascript" src="/ts/custom.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>



<script
    src="https://cdn.jsdelivr.net/gh/zhixuan2333/gh-blog@v0.1.0/js/nprogress.min.js"
    integrity="sha384-bHDlAEUFxsRI7JfULv3DTpL2IXbbgn4JHQJibgo5iiXSK6Iu8muwqHANhun74Cqg"
    crossorigin="anonymous"
></script>
<link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/gh/zhixuan2333/gh-blog@v0.1.0/css/nprogress.css"
    integrity="sha384-KJyhr2syt5+4M9Pz5dipCvTrtvOmLk/olWVdfhAp858UCa64Ia5GFpTN7+G4BWpE"
    crossorigin="anonymous"
/>
<script>
    NProgress.start();
    document.addEventListener("readystatechange", () => {
        if (document.readyState === "interactive") NProgress.inc(0.8);
        if (document.readyState === "complete") NProgress.done();
    });
</script>

    
    
</body>
</html>
